
<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/meta',{ time:time}) %>
  <title><%= title %></title>  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/cdn/fontawesome/css/all.min.css">
  <!-- SweetAlert2 -->
  <script src="/cdn/sweetalert2.all.min.js"></script>
  <% if(!IS_PRODUCTION) { %>
  <link rel="stylesheet" href="/css/utils.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/fontsAnuphan.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/alink.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/toast.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/flexNew.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/input.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/pagination5btns3.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/modal.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/nav.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/same.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/invoice_report.css?v=<%= time %>">
  <% } else { %>
  <link rel="stylesheet" href="/css-min/invoice_report.min.css?v=<%= time %>">
  <% }  %>
</head>
<body>

  <!-- header -->
  <%- include('partials/nav.ejs') %>
  <%- include('partials/notify.ejs', {msg:msg}) %> 

  <main>
    
    <!-- ********************************************************
    *************************************************************
    *************************************************************
    ********************* toolbar-left **************************
    *************************************************************
    *************************************************************
    **********************************************************-->

    <!--  -->
    <section class="main-left">

      <!-- Toolbar#1 -->
      <div class="row">
        <label class="col-1-5 mg-r-s"></label>
        <button class="col-1-0 btn bg-clear pd-l-xl pd-r-xl lh-xn nowrap" type="button" 
                onclick="clearSelect()">
          <i class="fa fa-broom mg-r-m"></i>ล้างค่า
        </button> 
        <h3 class="col-7-5 al-c lh-xn"><%= title %></h3>
      </div>

      <!-- Toolbar#2 -->
      <div class="row mg-t-s">

        <!-- เลือกยูสเซอร์ -->
        <label class="col-1-5  al-r pd-r-s">ผู้เสนอราคา</label>
        <div class="col-6-5 modalCtn">
          <input class="al-l pd-l-m h-100" type="text" 
                  id="searchUser" placeholder="ค้นหายูสเซอร์" 
                  onclick="clearSearchModal(this)" 
                  onfocus="popModalUsers(event)" 
                  oninput="popModalUsers(event)" 
                  autocomplete="off" tabindex="-1">
          <div class="modal"><div class="modal-list"></div></div>
        </div>

        <!--  -->
        <input class="col-2 al-c" type="text" 
               id="userId" placeholder="เลขที่ยูสเซอร์" readonly>
      </div>


      <!-- Toolbar#3 -->
      <div class="row">

        <!-- เลือก Item -->
        <label class="col-1-5 al-r pd-r-s">ไอเท็ม</label>
        <div class="col-6 modalCtn">
          <input class="al-l pd-l-m h-100" type="text" 
                 id="searchItem" placeholder="ค้นหาไอเท็ม" 
                 onclick="clearSearchModal(this)" 
                 onfocus="popModalItems(event)" 
                 oninput="popModalItems(event)" 
                 autocomplete="off">
          <div class="modal"><div class="modal-list"></div></div>
        </div>
        <input class="col-2-5 al-c pd-l-m" type="text" 
               id="itemId" placeholder="ไอเท็มไอดี" readonly>
      </div>

      <!-- Toolbar#4 -->
      <div class="row">
        <label class="col-1-5  al-r pd-r-s">เลขที่เอกสาร</label>
        <div class="col-8-5 modalCtn">
          <input class="al-c pd-l-m" type="text" 
                  id="docId" placeholder="ค้นหาเอกสาร" 
                  onclick="clearSearchModal(this)" 
                  onfocus="popModalDocId(event)" 
                  oninput="popModalDocId(event)" 
                  autocomplete="off">
          <div class="modal"><div class="modal-list"></div></div>
        </div>
      </div>

    </section>

    <!-- ********************************************************
    *************************************************************
    *************************************************************
    ********************* toolbar-right *************************
    *************************************************************
    *************************************************************
    **********************************************************-->

    <!--  -->
    <section class="main-right">

      <!-- right#1 -->
      <div class="flex-row space-between">
        
        <!-- 
        <button class="btn bg-clear pd-l-xl pd-r-xl lh-xn" type="button" 
                onclick="clearSelect()">
          <i class="fa fa-broom"></i> ล้าง
        </button> 
        -->

        <button class="nowrap btn bg-print pd-l-xl pd-r-xl lh-xn" type="button" onclick="window.print();">
          <i class="fa fa-print"></i> พิมพ์
        </button>        
        

        <button class="btn bg-move pd-l-xl pd-r-xl lh-xn" type="button"
                data-toggle="842px"
                onclick="adjustWidthToggle(this);">
          <i class="fa fa-arrows-alt-h"></i>
        </button>

      </div>

      <!-- right#2 -->
      <div class="flex-row mg-t-m">
        <label class="col-1-5 al-r pd-r-s lh-xn">เดือน</label>
        <select class="col-7 al-c  mg-r-m lh-xn" id="selectMonth" name="selectMonth">          
          <% monthDocs.forEach( m => { %>
          <option value="<%= m.month %>"><%= m.monthName %></option>
          <% }) %>
        </select>      

        <!-- ปฏิทินเอกสาร -->
        <button class="col-1-5  lh-xn btn bg-mediumseagreen" 
                type="button" id="btnCalendar" 
                onclick="concludeDocsCalendar(this,'calendarReport');">
          <i class="fa fa-calendar"></i>
            <!-- ปฏิทินเอกสาร  -->
        </button>

      </div>

      <!-- right#3 -->
      <div class="flex-row space-between mg-t-m">

        <!-- สรุปเอกสาร -->
        <button class="btn bg-cornblue pd-l-xl pd-r-xl lh-xn" type="button" 
                id="btnConcludeDocReport" 
                onclick="concludeReport(this,'docsReport');">
          <i class="fa fa-file-alt"></i> สรุปเอกสาร
        </button>

        <!-- ประวัติการยืมไอเท็ม -->
        <button class="btn bg-goldenrod pd-l-xl pd-r-xl lh-xn" type="button" 
                id="btnConcludeItemsReport"
                onclick="concludeReport(this,'itemsReport');">
          <i class="fa fa-history"></i> ประวัติไอเท็ม
        </button>

      </div>


    </section>

    <!-- ********************************************************
    *************************************************************
    *************************************************************
    *************************************************************
    ********************* BOTTOM : สำหรับแสดงรายงาน **************
    *************************************************************
    *************************************************************
    ********************************************************** -->
    <section class="main-bottom" id="resultTableCtn">
    </section>
  </main>

  

  <%- include('partials/footer') %>

  <script type="text/javascript">
    const PATH_MAIN = `<%= PATH_MAIN %>`
    const PATH_REPORT = `<%= PATH_REPORT %>`
    const PATH_CALENDAR = `<%= PATH_CALENDAR %>`

    const DATA_USERS = JSON.parse(`<%- dataUsersJson %>`) ;
    const DATA_ITEMS = JSON.parse(`<%- dataItemsJson %>`) ;    
    const DATA_DOCIDS = JSON.parse(`<%- dataDocIdsJson %>`) ;    
  </script>

  <% if(!IS_PRODUCTION) { %>
  <script type="text/javascript" src="/js/script_all.js?v=<%= time %>"></script>
  <script type="text/javascript" src="/js/nav.js?v=<%= time %>"></script>
  <script type="text/javascript" src="/js/notify.js"></script>
  <script type="text/javascript" src="/js/invoice_report.js?v=<%= time %>"></script>
  <% } else { %>
  <script src="/js-min/invoice_report.obf.js"></script>
  <% }  %>

</body>
</html>


<!-- ********************************************************
*************************************************************
*************************************************************
*************************************************************
************************** template *************************
*************************************************************
*************************************************************
*************************************************************
********************************************************* -->

<!-- ใช้กับปฏิทินเท่านั้น -->
<template id="windowTemplate">
  <div class="window-ctn pd-xs" name="windowCtn">

    <!-- TITLE -->
    <!-- <div class="window-title" name="windowTitle">
      <p>
        <span name="titleText_a" class="titleText1 fc-white pd-l-"></span>
        <span name="titleText_b" class="titleText2 fc-lime"></span>
        <span name="titleText_c" class="titleText3 fc-yellow"></span>    
        <span name="btnClose"    class="close-window"   onclick="closeWindow(this)">&#10006</span>
        <span name="btnCopy"     class="expand-window"  onclick="copyTable(this)">copy</span>
        <span class="clickable expand-window" 
              data-direction="up"
              onclick="moveWindow(this)">&#8679;</span>
        <span class="clickable expand-window" 
              data-direction="down"
              onclick="moveWindow(this)">&#8681;</span>
      </p>
    </div>
    <div class="window-title2" name="windowTitle2"></div> 
    -->

    <!-- TABLE CTN -->
    <div class="" name="tableCtn"></div>
  </div>
</template>

