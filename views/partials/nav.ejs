<!--  -->
<div class="nav-ctn">

  <nav>

    <!-- Zone 1: Left -->
    <div class="nav-1 d-flex">

      <!-- ปุ่ม -->
      <div>
        <% NAV_LEFT_1.forEach( (obj) => { %>
          <% if (!isAuth || !obj.userAuthorities.includes(userAuthority)) return; %>
          <a class="nav-link <%= title == obj.title ? 'active' : '' %>" 
            href="<%= obj.path %>" 
            title="<%= obj.title %>">
            <i class="fas <%= obj.icon %> mg-r-m"></i>
          </a>
          <% if (obj.separator) { %>
            <span class="nav-link fc-liblue">|</span>
          <% } %>
        <% }) %>
      </div>

      <!-- select report -->
      <form id="nav_reportForm" method="get">
        <select id="nav_reportType" class="al-c" title="รายงาน">
          <option value="">-</option>
          <option value="/report/quotation" <%= title == PAGE_REPORT_QUOTATION ? 'selected' : '' %>>
            <%= global.PAGE_QUOTATION %>
          </option>
          <option value="/report/invoice" <%= title == PAGE_REPORT_INVOICE ? 'selected' : '' %>>
            <%= global.PAGE_INVOICE %>
          </option>
          <option value="/report/receipt" <%= title == PAGE_REPORT_RECEIPT ? 'selected' : '' %>>
            <%= global.PAGE_RECEIPT %>
          </option>
          <option value="/report/bill" <%= title == PAGE_REPORT_BILL ? 'selected' : '' %>>
            <%= global.PAGE_BILL %>
          </option>
        </select>
        <!-- <button type="submit"><i class="fas fa-paper-plane"></i></button> -->
      </form>

      <div class="mg-l-l">
        <% NAV_LEFT_2.forEach( (obj) => { %>
          <% if (!isAuth || !obj.userAuthorities.includes(userAuthority)) return; %>
          <a class="nav-link <%= title == obj.title ? 'active' : '' %>" 
            href="<%= obj.path %>" 
            title="<%= obj.title %>">
            <i class="fas <%= obj.icon %> mg-r-m"></i>
          </a>
          <% if (obj.separator) { %>
            <span class="nav-link fc-liblue">|</span>
          <% } %>
        <% }) %>
      </div>

    </div>  

    <!-- Zone 2: User Info -->
    <% if (isAuth) { %>
    <%  const title = `ชื่อผู้ใช้ : ${username}\nรหัสผู้ใช้ : ${userId}\nสิทธิ์การใช้งาน : ${userAuthority}` %>
    <div class="nav-2 al-c" title="<%= title %>">
      <a class="<%= title == PAGE_USER_INFO ? 'active' : '' %>" href="/user">
        <i class="fas fa-user fc-liblue mg-r-m"></i><%= username %>
      </a>
    </div>
    <% } %>
    
    <!-- Zone 3: Right -->
    <% if (isAuth) { %>
    <div class="nav-3">

      <!--  -->
      <button class="nav-link nav-dropdown-toggle" id="navDropdownBtn" type="button">
        <i class="fas fa-bars"></i>
      </button>

      <!--  -->
      <div class="nav-dropdown-menu" id="navDropdownMenu">
        
        <!--  -->
        <% if( ['A','O'].includes(userAuthority) ){ %>
        <a href="/manage/settings" class="nav-link <%= title == PAGE_MANAGE_SETTINGS ? 'active' : '' %>"  
           title="ตั้งค่า"><i class="fas fa-sliders-h mg-r-m"></i> <%= PAGE_MANAGE_SETTINGS %>
        </a>

        <a href="/manage/users" class="nav-link <%= title == PAGE_MANAGE_USERS ? 'active' : '' %>"  
          title="จัดการผู้ใช้"><i class="fas fa-users-cog mg-r-m"></i> <%= PAGE_MANAGE_USERS %>
        </a>

        <a href="/manage/sessions" class="nav-link <%= title == PAGE_MANAGE_SESSIONS ? 'active' : '' %>"  
          title="จัดการเซสชั่น"><i class="fas fa-user-clock mg-r-m"></i> <%= PAGE_MANAGE_SESSIONS %>
        </a>
        <% } %>


        <!--  -->
        <% if(dataSettings && ['O'].includes(userAuthority) && dataSettings.SETTINGS_SYSTEM == 'on'){ %>
        <a href="/manage/settings/system" class="nav-link <%= title == PAGE_MANAGE_SETTINGS_SYSTEM ? 'active' : '' %>" 
           title="System Settings"><i class="fas fa-cog mg-r-m"></i> <%= PAGE_MANAGE_SETTINGS_SYSTEM %>
        </a>
        <% } %>

        <!--  -->
        <!-- < if(dataSettings && dataSettings.FILES_MANAGER == 'on' && ['O'].includes(userAuthority)){ >
        <a href="/files-manager" class="nav-link <= title == PAGE_FILES_MANAGER ? 'active' : '' >" 
           title="Files Manager"><i class="fas fa-file-alt mg-r-m"></i> <= PAGE_FILES_MANAGER >
        </a>
        < } > 
        -->

        <!--  -->
        <!-- 
        < if(dataSettings && dataSettings.SYSTEM_MANUAL == 'on' ){ >
        <a href="/system-manual" class="nav-link <= title == PAGE_SYSTEM_MANUAL ? 'active' : '' >" 
            title="คู่มือการใช้งานระบบ"><i class="fas fa-book mg-r-m"></i> <= PAGE_SYSTEM_MANUAL >
        </a>
        < } > 
        -->

        <!--  -->
        <% if(dataSettings && dataSettings.TERM_AND_CONDITION == 'on' ){ %>
        <a class="nav-link" href="/term-and-conditions" title="Term and Conditions">
          <i class="fas fa-file-contract mg-r-m"></i> <%= PAGE_TERM %>
        </a>
        <% } %>

        <!--  -->
        <a class="nav-link" href="/logout" title="Logout">
          <i class="fas fa-sign-out-alt mg-r-m"></i> ออกจากระบบ
        </a>

      </div>

    </div>
    <% }else{ %>
    <div class="nav-3">
      <a class="nav-link" href="/login"><i class="fas fa-sign-in-alt"></i></a>
    </div>
    <% } %>
  </nav>
</div>    
