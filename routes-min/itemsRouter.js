const _0x3a0e8b=_0x2297;(function(_0x541cfd,_0x1aaaf7){const _0x1f46ce=_0x2297,_0x41dcee=_0x541cfd();while(!![]){try{const _0x5b64a1=parseInt(_0x1f46ce(0x365))/0x1*(-parseInt(_0x1f46ce(0x3b7))/0x2)+parseInt(_0x1f46ce(0x28d))/0x3*(parseInt(_0x1f46ce(0x280))/0x4)+-parseInt(_0x1f46ce(0x339))/0x5+parseInt(_0x1f46ce(0x3a1))/0x6+-parseInt(_0x1f46ce(0x310))/0x7*(-parseInt(_0x1f46ce(0x34a))/0x8)+parseInt(_0x1f46ce(0x213))/0x9+-parseInt(_0x1f46ce(0x26b))/0xa*(parseInt(_0x1f46ce(0x240))/0xb);if(_0x5b64a1===_0x1aaaf7)break;else _0x41dcee['push'](_0x41dcee['shift']());}catch(_0xd4c000){_0x41dcee['push'](_0x41dcee['shift']());}}}(_0x3152,0xbd01a));const _0x444572=(function(){const _0x5ac6c3=_0x2297,_0x35cf1d={'GvGEG':function(_0x334601,_0x2ffde7){return _0x334601(_0x2ffde7);},'kIXwG':function(_0xfead0c,_0x5e8ff5){return _0xfead0c+_0x5e8ff5;},'WwOkt':_0x5ac6c3(0x397),'XLUJO':_0x5ac6c3(0x3ca),'vugVT':function(_0x1add8b){return _0x1add8b();},'yuEna':function(_0x355c70,_0x23447e){return _0x355c70(_0x23447e);},'SWvPm':function(_0x436ce7,_0x11e97d){return _0x436ce7===_0x11e97d;},'BUKuk':_0x5ac6c3(0x2a8),'geFZX':_0x5ac6c3(0x34c),'pEGuw':_0x5ac6c3(0x290),'lGUUU':'oJvqD','zHRPj':function(_0x2e2f4a,_0x3bd9f8){return _0x2e2f4a===_0x3bd9f8;},'WSiqz':_0x5ac6c3(0x383),'kRmnX':_0x5ac6c3(0x275)};let _0x111680=!![];return function(_0x5afdeb,_0xc3d256){const _0x31bf83=_0x5ac6c3,_0x3dff84={'jlppj':function(_0x4ffee9,_0x4375f4){const _0x27cd74=_0x2297;return _0x35cf1d[_0x27cd74(0x2ce)](_0x4ffee9,_0x4375f4);},'FuUWX':function(_0x201f0c,_0x1f298e){const _0x5ca8e8=_0x2297;return _0x35cf1d[_0x5ca8e8(0x1f9)](_0x201f0c,_0x1f298e);},'nJRHL':_0x35cf1d['BUKuk'],'msqAe':_0x35cf1d[_0x31bf83(0x35c)],'ODyrY':_0x35cf1d[_0x31bf83(0x31f)],'ehXJF':_0x35cf1d[_0x31bf83(0x30c)]};if(_0x35cf1d[_0x31bf83(0x2c9)](_0x35cf1d[_0x31bf83(0x3d0)],_0x35cf1d[_0x31bf83(0x249)])){const _0x5bbe36=_0x35cf1d[_0x31bf83(0x261)](_0x49dc50,_0x35cf1d['kIXwG'](_0x35cf1d['kIXwG'](_0x35cf1d[_0x31bf83(0x2a0)],_0x35cf1d[_0x31bf83(0x29b)]),');'));_0x5d34e6=_0x35cf1d[_0x31bf83(0x2ac)](_0x5bbe36);}else{const _0x28a205=_0x111680?function(){const _0x23ab27=_0x31bf83;if(_0x3dff84[_0x23ab27(0x298)](_0x3dff84[_0x23ab27(0x234)],_0x3dff84[_0x23ab27(0x37c)]))_0x3dff84[_0x23ab27(0x2ab)](_0x2da32e,0x0);else{if(_0xc3d256){if(_0x3dff84[_0x23ab27(0x298)](_0x3dff84[_0x23ab27(0x279)],_0x3dff84[_0x23ab27(0x2e9)]))_0xb9fc6e[_0x23ab27(0x303)](_0x5ec16b),_0x7f50d[_0x23ab27(0x2fe)](0x194)[_0x23ab27(0x23d)](_0x4f523b);else{const _0x4c5197=_0xc3d256[_0x23ab27(0x2f0)](_0x5afdeb,arguments);return _0xc3d256=null,_0x4c5197;}}}}:function(){};return _0x111680=![],_0x28a205;}};}());function _0x3152(){const _0x43c300=['extname','$itemId','uKSjn','lXsmA','UhAfj','FPZki','toohH','snxHW','MaqLI','DLBPA','bSfdo','FLRVr','ehXJF','dbColl_quotation','JNlNc','pSdNe','LGuxE','Jnfky','cHzHS','apply','slice','.png','fRyiv','MEUIK','/delete','HlMvL','resize','error\x20===>\x20','Jofab','dbUrl','tNfQb','_temp.jpg','pVmcn','status','cUMVm','BxcrL','JWiLT','?sip=','log','PfCCE','/myUsers.js','getSessionData','itemName','NjmWP','ไอเท็ม\x20\x22','OSDce','/items','lGUUU','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','wRcQW','updateOne','28syuSel','เพิ่ม\x20\x22','vNkQj','lbUtd','\x22\x20เรียบร้อยแล้ว','Upload\x20error:\x20','promises','stateObject','zAHbU','GQWbM','oJnEF','uumGE','redirect','WBsnU','jMYSv','pEGuw','AtGJP','Error\x20reading\x20image\x20file:','wMfbk','uZAAk','thbEW','lhTyx','/myModule.js','MMGSj','OrqPQ','image/png','iEStZ','UtuyF','hfPsa','HvIUe','categoryName','LVFGN','SojdD','heIBc','JJSdY','image/jpeg','THSMO','PvzJx','itemId','cnqTf','zKsTq','3889595XqYCFs','AdxTY','BmSOF','DkPtq','itemImage','end','readFileSync','GemBY','ZMEmP','dVslL','trace','getDate','userFlash','.jpg','call','eTaFv','tLhUf','2278200NyaxWB','HEdXP','cUZSC','ObRyC','UTIMD','replace','Otvdt','gqegn','dbColl_receipt','ixjYL','itemUnit','DLSIi','YZXnf','OnRZl','SWvGQ','Not\x20Found','limit','unlink','geFZX','AaFrq','oIWgY','tJHJy','gzlti','active','/myDateTime.js','PeMzY','includes','19914ZHrnHe','input','uaIvf','\x20Items','QXdDA','ICDAN','single','pnbUZ','DXBGH','OToME','aqkIA','connect','YNqKJ','flash','Sncno','categoryId','ZsjjJ','OZAeF','Print\x20','Could\x20not\x20clean\x20up\x20temp\x20file:','zJpRu','DRRsI','ycoHA','msqAe','ecUqN','WYkWg','eOyUB','length','MamJq','while\x20(true)\x20{}','wqJWi','jCVTk','{{sep}}\x22','toArray','ZvBGr','DdWXV','vikjD','wQarV','xZHmm','wbBHa','QkJqL','itemStatus','toISOString','zINLH','ลบข้อมูลได้\x20แต่ลบภาพไม่ได้','/load','wpsKv','kqeKo','BLZKz','lpexh','return\x20(function()\x20','OjMwz','__proto__','XhEKM','$dateTimeCanDelete','EUtcD','test','params','red','PMTVb','1870362cvlEgq','RSfYm','CfZRx','ZlZRc','readFile','deletedCount','yQHoN','TsVHF','tEjtR','oUeHN','IDMzq','jJjks','Error\x20renaming\x20temp\x20file:','iJxdu','rename','KHDvj','dTzst','ChSvq','ไม่พบ\x20\x22','cZJdI','hxmJw','ElplN','20djbWSN','BUPmN','DXUGu','rsuNX','AXWcG','/:filename','query','originalname','MZHRJ','GptNW','ไม่มีข้อมูลที่จะพิมพ์','wFfaK','uHwTx','ieSsE','MvBJF','fUEOC','METkf','yrnSA','getSettings','{}.constructor(\x22return\x20this\x22)(\x20)','kGDSR','lnPfD','loadId','BHzzW','iqBsj','WSiqz','prVvF','bUNby','dbColl_bill','ZkPPj','GcxFY','HcVOa','Bwiyq','zbLpD','Router','tNkxC','SHSrV','\x22\x20และ\x20ภาพเรียบร้อยแล้ว','&scid=','vkXTg','Error\x20reading\x20image:','itemPrice','CrafQ','ptAJK','join','XgAfV','toFile','toLowerCase','WhkSx','NEZNV','bvkmg','AINoj','OrNax','insertOne','.jpeg','application/octet-stream','ctAZy','close','categoryNew','gQNTC','FOUwS','Uetke','tVNzE','sYGJJ','XwGrq','basename','LxvCF','SWvPm','sort','&rpp=','fiNEW','tdWcH','oUxZr','อัปเดต\x20\x22','nsqZb','BvYRv','CqiSC','ZthoR','/save','sis','find','CjkdD','sip','collection','EOGrh','ZurYo','vRkSh','mZvyU','stringify','MiIPf','page','bttJo','{{sep}}ไม่สามารถลบได้','9660654eRNYJR','error','ntZIX','file','MxqTJ','gJPiO','LxqbT','JGdep','qRQaa','mCADb','ORYXD','DLtPY','qSyDn','dkUwz','zaMdt','kIxqk','Xwuqa','aggregate','KAIio','OYzRb','ATGvN','lVHxf','PlwHC','ลบ\x20\x22','LlhGC','giMDL','JgTUm','jzYYI','cNuYv','green','soTrT','tESUk','dbColl_itemsCategories','nJRHL','UAHAw','chain','YXHdq','phEpz','LQBeX','ECacr','Errgy','gger','sendFile','jpeg','JhbDM','44INhmWo','info','gSRMX','VTWiG','nUzrk','pQAjw','hfNPc','NgaRB','czcLq','kRmnX','FGBRM','CstbY','jZICb','LIept','writeHead','รหัสไอเทมต้องเป็นตัวอักษร\x205\x20ตัวขึ้นไป','TuoTv','xGqRn','filename','action','FclXP','pnzuS','CfLIx','xgNTX','gbvhI','findOne','OuDmR','PjVcn','msg','dYlZL','&page=','console','NktYe','GvGEG','dUIoT','dbName','warn','debu','zNNhJ','newDateTimeLocal','send','print_items.ejs','KVFNw','3155580HEelEa','Cbqjr','JfoJJ','dateTimeCanDelete','lbNAW','MnSZn','JIoDs','get','message','SGuez','MxvhV','jcQjX','scid','SnoDG','ODyrY','เกิดข้อผิดพลาดในการดึงรูปภาพ','rUqGu','cuXRe','CUwrY','counter','post','5528bTKDPd','MulterError','glWsN','EpCno','oRKmN','setDate','IxCPC','isAuth','ABaEz','pLIIJ','fKbwN','jpAKU','/view','1062PGYUkF','OGfJb','Warning:\x20Could\x20not\x20delete\x20original\x20file:','qoGEC','BsrZE','init','MxTvO','JBQyR','VWzpx','QiSJZ','bind','FuUWX','lJEHZ','zNGda','XLUJO','itemImageDataUrl','yGdXx','hRYkZ','XdLyQ','WwOkt','jWKop','Only\x20.jpg,\x20.jpeg,\x20and\x20.png\x20files\x20are\x20allowed!','unshift','cYdQS','RhSUD','dsFMM','yayBF','oSicJ','WUWCP','itemIdToDelete','jlppj','vugVT','toString','wjWNa','wYiUU','\x20ไอเท็มเรียบร้อยแล้ว','exception','dbColl_items','mlRQd','nUEOQ','RQNZh','render','rpp','cwlUs','OMgbR','rLPWv','RMQGl','iKQob','getDateTime','ไอดีไม่ถูกต้อง','jUBmE','vkxzG','../','cIBAe','Zydla','function\x20*\x5c(\x20*\x5c)','BKUZf','constructor','OxnqF','KzeYu','zHRPj','พิมพ์\x20','fYqTv','LpJZa','xGBSS','yuEna','AkppT','minute','body','GUWnG','xgdEZ','countDocuments','IpNcQ','aNBvz','ceil','bHVbw','&sis=','path','table','sHgIr'];_0x3152=function(){return _0x43c300;};return _0x3152();}(function(){const _0x680037=_0x2297,_0x2a4ec5={'jUBmE':_0x680037(0x25c),'VWzpx':_0x680037(0x39f),'cZJdI':function(_0x3e7060,_0x40055b){return _0x3e7060!==_0x40055b;},'ZurYo':_0x680037(0x323),'EpCno':_0x680037(0x3f4),'AtGJP':_0x680037(0x2c4),'XwGrq':_0x680037(0x30d),'sYGJJ':function(_0x449df2,_0x595695){return _0x449df2(_0x595695);},'LxvCF':'init','rLPWv':function(_0x4424d8,_0x566209){return _0x4424d8+_0x566209;},'ntZIX':_0x680037(0x236),'NgaRB':function(_0x32ecb8,_0x59bf56){return _0x32ecb8+_0x59bf56;},'ihwos':_0x680037(0x366),'bSfdo':_0x680037(0x3d5),'JgTUm':function(_0x4578f8,_0x5b8368){return _0x4578f8(_0x5b8368);},'YXHdq':_0x680037(0x2cb),'JNlNc':function(_0x55ba02){return _0x55ba02();},'gbvhI':function(_0x8fbc68,_0x18bb95,_0x3aa466){return _0x8fbc68(_0x18bb95,_0x3aa466);}};_0x2a4ec5[_0x680037(0x258)](_0x444572,this,function(){const _0x52b44e=_0x680037;if(_0x2a4ec5[_0x52b44e(0x3b4)](_0x2a4ec5[_0x52b44e(0x20b)],_0x2a4ec5[_0x52b44e(0x283)])){const _0x120a92=new RegExp(_0x2a4ec5[_0x52b44e(0x320)]),_0x1a5385=new RegExp(_0x2a4ec5[_0x52b44e(0x1f6)],'i'),_0x3bea82=_0x2a4ec5[_0x52b44e(0x1f5)](_0x63aecc,_0x2a4ec5[_0x52b44e(0x1f8)]);if(!_0x120a92[_0x52b44e(0x39d)](_0x2a4ec5[_0x52b44e(0x2ba)](_0x3bea82,_0x2a4ec5[_0x52b44e(0x215)]))||!_0x1a5385[_0x52b44e(0x39d)](_0x2a4ec5[_0x52b44e(0x247)](_0x3bea82,_0x2a4ec5['ihwos'])))_0x2a4ec5[_0x52b44e(0x3b4)](_0x2a4ec5[_0x52b44e(0x2e7)],_0x2a4ec5[_0x52b44e(0x2e7)])?(_0x314daa['log'](_0xa394ab),_0xf709d6['sendFile'](_0x426c45)):_0x2a4ec5[_0x52b44e(0x22d)](_0x3bea82,'0');else{if(_0x2a4ec5[_0x52b44e(0x3b4)](_0x2a4ec5[_0x52b44e(0x237)],_0x2a4ec5['YXHdq']))return _0x5c528c[_0x52b44e(0x303)](_0x37a50c[_0x52b44e(0x273)]),_0x4bb549['flash'](_0x2a4ec5[_0x52b44e(0x2bf)],{'class':_0x2a4ec5[_0x52b44e(0x295)],'text':''+_0x524172['message']}),_0x5a8f91['redirect'](_0x5d6a51);else _0x2a4ec5[_0x52b44e(0x2eb)](_0x63aecc);}}else _0x12f86d[_0x52b44e(0x3f0)]();})();}());const _0x243c38=(function(){const _0x4cd3cc=_0x2297,_0x4d182e={'gqegn':_0x4cd3cc(0x28f),'CfLIx':'Error\x20reading\x20image\x20file:','bHVbw':function(_0xcb885,_0x214c8d){return _0xcb885!==_0x214c8d;},'PfCCE':_0x4cd3cc(0x225),'QkJqL':_0x4cd3cc(0x313),'wrDzj':'GWIrC','MxTvO':function(_0x4c7f5f,_0x1df318){return _0x4c7f5f===_0x1df318;},'gJPiO':_0x4cd3cc(0x3aa),'CkYPN':_0x4cd3cc(0x2e1)};let _0x86908=!![];return function(_0x4ed46f,_0x5823b4){const _0x18dd88=_0x4cd3cc,_0x3e7dc3={'PlwHC':_0x4d182e[_0x18dd88(0x351)],'vRkSh':_0x4d182e[_0x18dd88(0x256)],'ENxpM':function(_0x11c061,_0x200710){const _0x4bb8d1=_0x18dd88;return _0x4d182e[_0x4bb8d1(0x2d8)](_0x11c061,_0x200710);},'kIxqk':_0x4d182e[_0x18dd88(0x304)],'gSRMX':_0x4d182e[_0x18dd88(0x38d)],'mCADb':_0x4d182e['wrDzj']};if(_0x4d182e[_0x18dd88(0x293)](_0x4d182e[_0x18dd88(0x218)],_0x4d182e['CkYPN'])){const _0x12d188=_0x17a40d?function(){if(_0x30b14c){const _0x1ebece=_0x3c146d['apply'](_0x1e51bf,arguments);return _0x5bd357=null,_0x1ebece;}}:function(){};return _0x5911cc=![],_0x12d188;}else{const _0x5a6a49=_0x86908?function(){const _0x30da7f=_0x18dd88,_0x42025f={'lhTyx':_0x3e7dc3[_0x30da7f(0x229)],'tEjtR':_0x3e7dc3[_0x30da7f(0x20c)]};if(_0x3e7dc3['ENxpM'](_0x3e7dc3[_0x30da7f(0x222)],_0x3e7dc3[_0x30da7f(0x242)])){if(_0x5823b4){if(_0x3e7dc3['ENxpM'](_0x3e7dc3[_0x30da7f(0x21c)],_0x3e7dc3[_0x30da7f(0x21c)]))_0x2f95d6['error'](_0x42025f[_0x30da7f(0x325)],_0x7538a4[_0x30da7f(0x273)]);else{const _0x1419e0=_0x5823b4[_0x30da7f(0x2f0)](_0x4ed46f,arguments);return _0x5823b4=null,_0x1419e0;}}}else _0x70c139[_0x30da7f(0x303)](_0x42025f[_0x30da7f(0x3a9)],_0x162d95[_0x30da7f(0x273)]),_0x1b1d92[_0x30da7f(0x29c)]=null;}:function(){};return _0x86908=![],_0x5a6a49;}};}()),_0x129b95=_0x243c38(this,function(){const _0x200555=_0x2297,_0x42cd57={'lXsmA':_0x200555(0x2c4),'jJjks':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','RMQGl':function(_0x477e60,_0x5ab090){return _0x477e60(_0x5ab090);},'JIoDs':_0x200555(0x292),'OYzRb':function(_0x2f4401,_0x1381c7){return _0x2f4401+_0x1381c7;},'IDMzq':'chain','tuqyv':_0x200555(0x366),'pnzuS':function(_0x5993b7){return _0x5993b7();},'OZAeF':function(_0x429142,_0x4bdad5,_0x37031a){return _0x429142(_0x4bdad5,_0x37031a);},'SHSrV':function(_0x76caa8,_0x5751cc){return _0x76caa8!==_0x5751cc;},'FPZki':_0x200555(0x2b9),'mUttM':_0x200555(0x3ba),'JhbDM':'return\x20(function()\x20','tLhUf':_0x200555(0x3ca),'gQNTC':function(_0x32b84b){return _0x32b84b();},'ycoHA':function(_0x168b14,_0x32d3b2){return _0x168b14!==_0x32d3b2;},'xgdEZ':'LsFRC','IpNcQ':'log','ChSvq':'warn','VwsEr':_0x200555(0x241),'WBsnU':'error','wQarV':'exception','giMDL':_0x200555(0x2db),'DkPtq':_0x200555(0x343),'wwGMu':function(_0xc6306e,_0x474fa6){return _0xc6306e<_0x474fa6;},'OSDce':function(_0x525c22,_0x546369){return _0x525c22===_0x546369;},'dTzst':_0x200555(0x2b3)};let _0x128793;try{if(_0x42cd57[_0x200555(0x3db)](_0x42cd57[_0x200555(0x2e2)],_0x42cd57['mUttM'])){const _0x434cc3=_0x42cd57[_0x200555(0x2bb)](Function,_0x42cd57[_0x200555(0x226)](_0x42cd57[_0x200555(0x226)](_0x42cd57[_0x200555(0x23f)],_0x42cd57[_0x200555(0x349)]),');'));_0x128793=_0x42cd57[_0x200555(0x3f2)](_0x434cc3);}else{const _0x2e89ff=_0x1f06d8?function(){const _0x537e0f=_0x200555;if(_0x11ded6){const _0x54fd74=_0x43e3d4[_0x537e0f(0x2f0)](_0x258fe0,arguments);return _0x3b93ba=null,_0x54fd74;}}:function(){};return _0x14a638=![],_0x2e89ff;}}catch(_0x334cce){if(_0x42cd57[_0x200555(0x37b)](_0x42cd57['xgdEZ'],_0x42cd57[_0x200555(0x2d3)]))return _0x31d40d;else _0x128793=window;}const _0x348cc5=_0x128793[_0x200555(0x25f)]=_0x128793[_0x200555(0x25f)]||{},_0x21f4ea=[_0x42cd57[_0x200555(0x2d5)],_0x42cd57[_0x200555(0x3b2)],_0x42cd57['VwsEr'],_0x42cd57[_0x200555(0x31d)],_0x42cd57[_0x200555(0x38a)],_0x42cd57[_0x200555(0x22c)],_0x42cd57[_0x200555(0x33c)]];for(let _0x3cd54c=0x0;_0x42cd57['wwGMu'](_0x3cd54c,_0x21f4ea[_0x200555(0x380)]);_0x3cd54c++){if(_0x42cd57[_0x200555(0x30a)](_0x42cd57[_0x200555(0x3b1)],_0x42cd57[_0x200555(0x3b1)])){const _0x353551=_0x243c38[_0x200555(0x2c6)]['prototype'][_0x200555(0x297)](_0x243c38),_0x3fece9=_0x21f4ea[_0x3cd54c],_0x306dfd=_0x348cc5[_0x3fece9]||_0x353551;_0x353551[_0x200555(0x399)]=_0x243c38['bind'](_0x243c38),_0x353551[_0x200555(0x2ad)]=_0x306dfd[_0x200555(0x2ad)][_0x200555(0x297)](_0x306dfd),_0x348cc5[_0x3fece9]=_0x353551;}else{const _0xcd2186={'tNkxC':_0x42cd57[_0x200555(0x2e0)],'DRRsI':_0x42cd57[_0x200555(0x3ac)],'zNGda':function(_0x360fa1,_0x2aae00){return _0x42cd57['RMQGl'](_0x360fa1,_0x2aae00);},'anqKs':_0x42cd57[_0x200555(0x271)],'zKsTq':function(_0x4be384,_0x3bfb94){const _0x30fd76=_0x200555;return _0x42cd57[_0x30fd76(0x226)](_0x4be384,_0x3bfb94);},'dUIoT':_0x42cd57[_0x200555(0x3ab)],'fUEOC':_0x42cd57['tuqyv'],'MwGvz':function(_0x9de6c9){const _0x5ee62a=_0x200555;return _0x42cd57[_0x5ee62a(0x255)](_0x9de6c9);}};_0x42cd57[_0x200555(0x376)](_0x4353d3,this,function(){const _0x328654=_0x200555,_0x79161e=new _0x3363c3(_0xcd2186[_0x328654(0x3da)]),_0x38847f=new _0x3f735f(_0xcd2186[_0x328654(0x37a)],'i'),_0x222095=_0xcd2186[_0x328654(0x29a)](_0x1371e9,_0xcd2186['anqKs']);!_0x79161e[_0x328654(0x39d)](_0xcd2186[_0x328654(0x338)](_0x222095,_0xcd2186[_0x328654(0x262)]))||!_0x38847f[_0x328654(0x39d)](_0xcd2186[_0x328654(0x338)](_0x222095,_0xcd2186[_0x328654(0x3c6)]))?_0xcd2186[_0x328654(0x29a)](_0x222095,'0'):_0xcd2186['MwGvz'](_0x5929c3);})();}}});_0x129b95();import _0x56c12c from'express';const x=_0x56c12c[_0x3a0e8b(0x3d9)]();import{MongoClient as _0x4259e4}from'mongodb';import _0x3b48a0 from'ejs';import _0x56804c from'path';import _0x5acd28 from'fs';import _0x5cc7b2 from'multer';import _0x3ef920 from'sharp';import _0x2ea9ab from'../middleware/mainAuth.js';const F=await import(_0x3a0e8b(0x2c1)+mymoduleFolder+_0x3a0e8b(0x326)),j=await import(_0x3a0e8b(0x2c1)+mymoduleFolder+_0x3a0e8b(0x362)),W=await import('../'+mymoduleFolder+_0x3a0e8b(0x305)),p=_0x3a0e8b(0x30b),O=p+_0x3a0e8b(0x204),U=p+_0x3a0e8b(0x392),M=p+_0x3a0e8b(0x2f5),R=p+_0x3a0e8b(0x28c),k=p+'/print',Y=p[_0x3a0e8b(0x34f)](/\//g,'_');x[_0x3a0e8b(0x272)](p,_0x2ea9ab[_0x3a0e8b(0x287)],async(_0x967773,_0x16aa1e)=>{const _0x573fe7=_0x3a0e8b,_0xf745a4={'lpexh':'Error\x20reading\x20image:','FLRVr':_0x573fe7(0x27a),'thbEW':_0x573fe7(0x3ee),'Cbqjr':_0x573fe7(0x333),'JJSdY':_0x573fe7(0x329),'bvkmg':'Could\x20not\x20clean\x20up\x20temp\x20file:','CfZRx':function(_0x10d75e,_0x374d08){return _0x10d75e+_0x374d08;},'ElplN':_0x573fe7(0x265),'jMYSv':_0x573fe7(0x23c),'qRQaa':_0x573fe7(0x253),'czcLq':function(_0x50ec9d,_0x5a2ca6){return _0x50ec9d(_0x5a2ca6);},'HcVOa':_0x573fe7(0x2be),'MEUIK':function(_0x588ee1,_0x1059f2,_0x2681e1){return _0x588ee1(_0x1059f2,_0x2681e1);},'EUtcD':_0x573fe7(0x346),'BxcrL':_0x573fe7(0x3ed),'Bwiyq':'.png','LxqbT':function(_0x14bced,_0x2c222f,_0x4a415a){return _0x14bced(_0x2c222f,_0x4a415a);},'ctAZy':function(_0x250ff1,_0x5c55f6){return _0x250ff1(_0x5c55f6);},'QnBod':_0x573fe7(0x2a2),'LPDvQ':function(_0x4c83c2,_0x2c8620,_0x48b5fc){return _0x4c83c2(_0x2c8620,_0x48b5fc);},'wMfbk':function(_0x3a9ec3,_0x19d61e){return _0x3a9ec3===_0x19d61e;},'jzYYI':_0x573fe7(0x3a7),'qSyDn':_0x573fe7(0x3ae),'lJEHZ':function(_0x40a1d5,_0x2bf8d8){return _0x40a1d5===_0x2bf8d8;},'uzxno':_0x573fe7(0x341),'fVZRP':_0x573fe7(0x3d4),'MKwcI':_0x573fe7(0x39b),'eTaFv':_0x573fe7(0x2d0),'ieSsE':function(_0x7e8474,_0x2984fd){return _0x7e8474||_0x2984fd;},'hRYkZ':function(_0x81943a,_0x1d5bc5){return _0x81943a===_0x1d5bc5;},'XhEKM':_0x573fe7(0x29f),'uumGE':_0x573fe7(0x3c2),'iKgfH':_0x573fe7(0x2f6),'BmSOF':function(_0x2d11fe,_0x4eb69b){return _0x2d11fe/_0x4eb69b;},'zaMdt':function(_0x654cf9,_0x48c4a5){return _0x654cf9>_0x48c4a5;},'RSfYm':_0x573fe7(0x308),'ecUqN':function(_0x2e1aaa,_0x1ac61b){return _0x2e1aaa*_0x1ac61b;},'uHwTx':function(_0x564899,_0x1fb7eb){return _0x564899-_0x1fb7eb;},'rUqGu':function(_0xc78df3,_0x2cd954){return _0xc78df3(_0x2cd954);},'MnSZn':'OfZxc','lirhd':_0x573fe7(0x289),'FclXP':function(_0xd7a446,_0x48d6f9){return _0xd7a446(_0x48d6f9);},'JGdep':function(_0xc7fde9,_0x4580a0){return _0xc7fde9*_0x4580a0;},'YbpuX':function(_0x12907f,_0x3030b5){return _0x12907f-_0x3030b5;},'yayBF':function(_0x419c7e,_0x3f075f){return _0x419c7e/_0x3f075f;},'xGqRn':_0x573fe7(0x22f),'SZqiH':_0x573fe7(0x3d1),'cwlUs':function(_0xf3fc6e,_0x2f0cb1){return _0xf3fc6e===_0x2f0cb1;},'kNUFD':'vZOJI','WUWCP':_0x573fe7(0x28e),'OrqPQ':function(_0x4e4c80,_0xc6bdd5){return _0x4e4c80===_0xc6bdd5;},'GlxgM':_0x573fe7(0x373),'cIBAe':_0x573fe7(0x2a4),'LMXdk':function(_0x3bae0b,_0x175f31){return _0x3bae0b===_0x175f31;},'BKUZf':_0x573fe7(0x395),'GUWnG':_0x573fe7(0x356),'ABaEz':'base64','wYiUU':'cfIaV','EOGrh':_0x573fe7(0x321),'kqeKo':function(_0x324e05,_0x281fff){return _0x324e05<_0x281fff;},'ljJbm':function(_0x5d3b97,_0x384af5){return _0x5d3b97-_0x384af5;},'MiIPf':function(_0x66be00,_0x3a662c){return _0x66be00(_0x3a662c);},'pBUfM':function(_0x29c1dc,_0x9855b5){return _0x29c1dc-_0x9855b5;},'OnRZl':function(_0x464046,_0x41b73c){return _0x464046(_0x41b73c);},'xGBSS':function(_0x392009,_0x3d8ecb){return _0x392009+_0x3d8ecb;},'JWiLT':_0x573fe7(0x361),'wjWNa':'items','tueII':'msg','ZjHiU':_0x573fe7(0x345),'GQWbM':function(_0x3d33ac,_0x343a1c){return _0x3d33ac===_0x343a1c;},'hxmJw':_0x573fe7(0x30e),'Otvdt':_0x573fe7(0x35d)},_0x5542bc=_0x967773[_0x573fe7(0x3bd)][_0x573fe7(0x208)]?.[_0x573fe7(0x2ad)]()[_0x573fe7(0x34f)](/[!@#$%^&*\///]/g,'')??'',_0x3d5624=_0x967773[_0x573fe7(0x3bd)]['scid']?_0xf745a4['czcLq'](Number,_0x967773[_0x573fe7(0x3bd)][_0x573fe7(0x277)]):null,_0x371b79=_0x967773[_0x573fe7(0x3bd)]['sis'],_0x2e4acf=_0xf745a4[_0x573fe7(0x3ef)](Number,_0x967773['query'][_0x573fe7(0x2b7)])||0x1e;var _0x13b060=_0xf745a4[_0x573fe7(0x3ef)](Number,_0x967773['query'][_0x573fe7(0x210)])||0x1;const _0x46e904=_0x967773[_0x573fe7(0x3bd)][_0x573fe7(0x3cd)]||'',_0x15f8ba=new _0x4259e4(global['dbUrl']);try{if(_0xf745a4[_0x573fe7(0x299)](_0xf745a4['uzxno'],_0xf745a4['fVZRP'])){if(_0x35227a)return _0x120988[_0x573fe7(0x214)](_0xf745a4[_0x573fe7(0x396)],_0x474661),_0x103cbe[_0x573fe7(0x2fe)](0x1f4)['send'](_0xf745a4[_0x573fe7(0x2e8)]);const _0x610a7d=_0x1a5cc9[_0x555d55]||_0xf745a4[_0x573fe7(0x324)];_0x1f8254[_0x573fe7(0x24e)](0xc8,{'Content-Type':_0x610a7d}),_0x39dd20[_0x573fe7(0x33e)](_0x32f440);}else{await _0x15f8ba[_0x573fe7(0x370)]();const _0x5c1c1e=_0x15f8ba['db'](global[_0x573fe7(0x263)]),_0x239904=_0x5c1c1e[_0x573fe7(0x209)](global['dbColl_items']),_0x28a416={'_id':0x1,'itemId':0x1,'itemName':0x1,'categoryId':0x1,'itemStatus':0x1,'itemUnit':0x1,'itemPrice':0x1,'itemImage':0x1,'canDelete':0x1,'isCanDelete':{'$cond':{'if':{'$gt':[{'$dateDiff':{'startDate':{'$toDate':j['nowLocal']()[_0x573fe7(0x2f1)](0x0,0x10)[_0x573fe7(0x34f)]('T','\x20')},'endDate':{'$toDate':_0xf745a4['MKwcI']},'unit':_0xf745a4[_0x573fe7(0x348)]}},0x0]},'then':!0x0,'else':!0x1}}};if(_0xf745a4[_0x573fe7(0x3c4)](_0x5542bc,_0x3d5624)||_0x371b79){if(_0xf745a4[_0x573fe7(0x29e)](_0xf745a4['XhEKM'],_0xf745a4[_0x573fe7(0x39a)])){const _0x390507=[{'$project':_0x28a416},{'$sort':{'itemId':0x1}}];if(_0x5542bc){if(_0xf745a4['wMfbk'](_0xf745a4[_0x573fe7(0x31b)],_0xf745a4['iKgfH'])){const _0x451ecf={'Jnfky':_0xf745a4[_0x573fe7(0x396)],'erQPC':_0xf745a4[_0x573fe7(0x2e8)],'CstbY':_0xf745a4['thbEW']},_0x502116=_0x7d37d2['params'][_0x573fe7(0x252)],_0xafe856=_0x25d8c4['extname'](_0x502116)[_0x573fe7(0x3e6)](),_0x32b8cd=_0x127640[_0x573fe7(0x3e3)](_0x182999,_0x502116),_0x31214e={'.jpg':_0xf745a4[_0x573fe7(0x26c)],'.jpeg':_0xf745a4[_0x573fe7(0x26c)],'.png':_0xf745a4[_0x573fe7(0x332)]};_0x370e14['readFile'](_0x32b8cd,(_0x14e60b,_0xa2ab68)=>{const _0x566c5b=_0x573fe7;if(_0x14e60b)return _0x381945[_0x566c5b(0x214)](_0x451ecf[_0x566c5b(0x2ee)],_0x14e60b),_0x348300[_0x566c5b(0x2fe)](0x1f4)[_0x566c5b(0x268)](_0x451ecf['erQPC']);const _0x12f295=_0x31214e[_0xafe856]||_0x451ecf[_0x566c5b(0x24b)];_0xf825b7[_0x566c5b(0x24e)](0xc8,{'Content-Type':_0x12f295}),_0x12c036[_0x566c5b(0x33e)](_0xa2ab68);});}else{const _0x2262bd=new RegExp('.*'+_0x5542bc+'.*','i');_0x390507['unshift']({'$match':{'$or':[{'itemId':{'$regex':_0x2262bd}},{'itemName':{'$regex':_0x2262bd}}]}});}}_0x3d5624&&_0x390507[_0x573fe7(0x2a3)]({'$match':{'categoryId':_0x3d5624}}),_0x371b79&&_0x390507[_0x573fe7(0x2a3)]({'$match':{'itemStatus':_0x371b79}});var _0x358434=await _0x239904[_0x573fe7(0x224)](_0x390507)[_0x573fe7(0x386)](),_0x11326d=_0x358434[_0x573fe7(0x380)],_0x37e98d=Math['ceil'](_0xf745a4[_0x573fe7(0x33b)](_0x11326d,_0x2e4acf));if(_0xf745a4[_0x573fe7(0x221)](_0x13b060,_0x37e98d)){if(_0xf745a4[_0x573fe7(0x29e)](_0xf745a4[_0x573fe7(0x3a2)],_0xf745a4[_0x573fe7(0x3a2)])){var _0x3656d9=0x0;_0x13b060=_0xf745a4[_0x573fe7(0x221)](_0x11326d,0x0)?0x1:0x0;}else{if(_0x2fd753){const _0x42fa8a=_0x5ddcce[_0x573fe7(0x2f0)](_0x9b9e18,arguments);return _0x5c7bed=null,_0x42fa8a;}}}else var _0x3656d9=_0xf745a4[_0x573fe7(0x248)](Number,_0xf745a4[_0x573fe7(0x37d)](_0xf745a4[_0x573fe7(0x3c3)](_0x13b060,0x1),_0x2e4acf));var _0x26a22a=_0x358434['slice'](_0x3656d9,_0xf745a4['rUqGu'](Number,_0xf745a4['CfZRx'](_0x3656d9,_0x2e4acf)));}else _0x47c45c[_0x573fe7(0x214)](_0xf745a4[_0x573fe7(0x3e9)],_0x125678['message']);}else{if(_0xf745a4[_0x573fe7(0x299)](_0xf745a4[_0x573fe7(0x270)],_0xf745a4['lirhd']))(function(){return!![];}[_0x573fe7(0x2c6)](jagSkw[_0x573fe7(0x3a3)](jagSkw[_0x573fe7(0x3b6)],jagSkw[_0x573fe7(0x31e)]))[_0x573fe7(0x347)](jagSkw[_0x573fe7(0x21b)]));else{var _0x11326d=await _0x239904[_0x573fe7(0x2d4)]({});const _0x4b74f5=_0xf745a4[_0x573fe7(0x254)](Number,_0xf745a4[_0x573fe7(0x21a)](_0xf745a4['YbpuX'](_0x13b060,0x1),_0x2e4acf));var _0x26a22a=await _0x239904[_0x573fe7(0x224)]([{'$project':_0x28a416},{'$sort':{'itemId':0x1}},{'$skip':_0x4b74f5},{'$limit':_0x2e4acf}])['toArray'](),_0x37e98d=Math[_0x573fe7(0x2d7)](_0xf745a4[_0x573fe7(0x2a7)](_0x11326d,_0x2e4acf));}}if(_0x46e904){if(_0xf745a4[_0x573fe7(0x29e)](_0xf745a4[_0x573fe7(0x251)],_0xf745a4['SZqiH'])){const _0x36e036=_0x56958e[_0x573fe7(0x2d1)][_0x573fe7(0x336)];if(!new _0x5a677b(_0x3679a9)['test'](_0x36e036))_0xf745a4[_0x573fe7(0x248)](_0x55fa48,new _0x5e9a3b(_0xf745a4[_0x573fe7(0x3d6)]));else{const _0x5c1d25=_0x26f586[_0x573fe7(0x2dd)](_0x62930a['originalname']),_0x39b704=''+_0x36e036+_0x5c1d25;_0xf745a4[_0x573fe7(0x2f4)](_0x1751d2,null,_0x39b704);}}else{var _0x2df5fa=await _0x239904[_0x573fe7(0x259)]({'itemId':_0x46e904},{'projection':_0x28a416});if(_0x2df5fa){if(_0xf745a4[_0x573fe7(0x2b8)](_0xf745a4['kNUFD'],_0xf745a4[_0x573fe7(0x2a9)]))jagSkw[_0x573fe7(0x248)](_0x425248,'0');else{if(_0x2df5fa['itemImage']){if(_0xf745a4[_0x573fe7(0x328)](_0xf745a4['GlxgM'],_0xf745a4[_0x573fe7(0x2c2)])){const _0x394ba8=new _0x243447('.*'+_0x315d42+'.*','i');_0x2edc93[_0x573fe7(0x2a3)]({'$match':{'$or':[{'itemId':{'$regex':_0x394ba8}},{'itemName':{'$regex':_0x394ba8}}]}});}else{const _0x4146af=_0x56804c[_0x573fe7(0x3e3)](folderItems,_0x2df5fa['itemImage']);try{if(_0xf745a4['LMXdk'](_0xf745a4[_0x573fe7(0x2c5)],_0xf745a4[_0x573fe7(0x2d2)])){const _0x186791=_0x27d481[_0x573fe7(0x374)],_0x10302d=_0x17d88f[_0x573fe7(0x206)](_0xaf5db5=>_0xaf5db5['categoryId']==_0x186791)?.[_0x573fe7(0x32e)]||'-';return{..._0x368149,'categoryName':_0x10302d};}else{const _0x5a6d9e=await _0x5acd28[_0x573fe7(0x316)]['readFile'](_0x4146af),_0x1a6191=_0xf745a4[_0x573fe7(0x29e)](_0x56804c['extname'](_0x2df5fa['itemImage'])['toLowerCase'](),_0xf745a4[_0x573fe7(0x3d7)])?_0xf745a4[_0x573fe7(0x332)]:_0xf745a4[_0x573fe7(0x26c)];_0x2df5fa['itemImageDataUrl']='data:'+_0x1a6191+';base64,'+_0x5a6d9e[_0x573fe7(0x2ad)](_0xf745a4[_0x573fe7(0x288)]);}}catch(_0x101d37){if(_0xf745a4[_0x573fe7(0x328)](_0xf745a4[_0x573fe7(0x2af)],_0xf745a4[_0x573fe7(0x2af)]))console[_0x573fe7(0x303)](_0xf745a4[_0x573fe7(0x20a)],_0x101d37['message']),_0x2df5fa[_0x573fe7(0x29c)]=null;else{const _0x35b239=[_0xf745a4[_0x573fe7(0x39c)],_0xf745a4[_0x573fe7(0x300)],_0xf745a4[_0x573fe7(0x3d7)]],_0x2f8659=_0x525491[_0x573fe7(0x2dd)](_0x3f4c2f[_0x573fe7(0x3be)])[_0x573fe7(0x3e6)]();_0x35b239[_0x573fe7(0x364)](_0x2f8659)?_0xf745a4[_0x573fe7(0x219)](_0x27a75b,null,!0x0):_0xf745a4[_0x573fe7(0x3ef)](_0x3a56ea,new _0x2fb45d(_0xf745a4['QnBod']));}}}}}}else var _0x2df5fa=[];}}else var _0x2df5fa=[];const _0x2e22b2=_0xf745a4[_0x573fe7(0x394)](_0xf745a4['ljJbm'](_0xf745a4[_0x573fe7(0x20f)](Number,_0x13b060),0x1),0x1)?'-':_0xf745a4['pBUfM'](_0xf745a4[_0x573fe7(0x20f)](Number,_0x13b060),0x1),_0x421fd2=_0xf745a4[_0x573fe7(0x27b)](Number,_0x13b060),_0x356741=_0xf745a4[_0x573fe7(0x221)](_0xf745a4[_0x573fe7(0x3a3)](_0xf745a4[_0x573fe7(0x357)](Number,_0x13b060),0x1),_0x37e98d)?'-':_0xf745a4[_0x573fe7(0x2cd)](_0xf745a4[_0x573fe7(0x27b)](Number,_0x13b060),0x1),_0x4d1c67=await _0x5c1c1e[_0x573fe7(0x209)](global[_0x573fe7(0x233)])[_0x573fe7(0x206)]({'categoryStatus':_0xf745a4[_0x573fe7(0x301)]})[_0x573fe7(0x386)]();_0x26a22a=_0x26a22a['map'](_0x244ddf=>{const _0x249213=_0x573fe7,_0x16413a={'Cjbjm':function(_0x1d2bae,_0x499044,_0x465e0c){return _0xf745a4['LPDvQ'](_0x1d2bae,_0x499044,_0x465e0c);}};if(_0xf745a4[_0x249213(0x322)](_0xf745a4[_0x249213(0x22e)],_0xf745a4[_0x249213(0x21f)])){const _0x213d27=_0x7fd2e2[_0x249213(0x2dd)](_0x43a916[_0x249213(0x3be)]),_0x4037fc=''+_0x2b5d2f+_0x213d27;_0x16413a['Cjbjm'](_0xfeb2f0,null,_0x4037fc);}else{const _0x5cb886=_0x244ddf[_0x249213(0x374)],_0x5f27c0=_0x4d1c67[_0x249213(0x206)](_0x1b15e6=>_0x1b15e6[_0x249213(0x374)]==_0x5cb886)?.[_0x249213(0x32e)]||'-';return{..._0x244ddf,'categoryName':_0x5f27c0};}});const _0xd01d25=await F['renderView'](_0xf745a4[_0x573fe7(0x2ae)],_0x16aa1e,{'title':PAGE_ITEMS,'time':j['getDate'](),'msg':_0x967773[_0x573fe7(0x372)](_0xf745a4['tueII']),'userFlash':_0x967773[_0x573fe7(0x372)](_0xf745a4['ZjHiU']),'user':W[_0x573fe7(0x306)](_0x967773),...await F[_0x573fe7(0x3c9)](),'loadId':_0x46e904,'sip':_0x5542bc,'scid':_0x3d5624,'sis':_0x371b79,'rpp':_0x2e4acf,'page':_0x13b060,'pageAct':_0x421fd2,'pageNum':_0x37e98d,'pagePre':_0x2e22b2,'pageNxt':_0x356741,'pageLst':_0x37e98d,'totalDocs':_0x11326d,'PATH_MAIN':p,'PATH_SAVE':O,'PATH_LOAD':U,'PATH_DELETE':M,'PATH_VIEW':R,'PATH_PRINT':k,'PREFIX':Y,'dataItemsCategories':_0x4d1c67,'dataItems':_0x26a22a,'item':_0x2df5fa});_0x16aa1e[_0x573fe7(0x268)](_0xd01d25);}}catch(_0x121c16){_0xf745a4[_0x573fe7(0x319)](_0xf745a4[_0x573fe7(0x3b5)],_0xf745a4[_0x573fe7(0x3b5)])?(console['log'](_0x121c16),_0x16aa1e[_0x573fe7(0x2fe)](0x194)[_0x573fe7(0x23d)](file404)):_0xf745a4[_0x573fe7(0x248)](_0x556061,_0x30a18b);}finally{if(_0xf745a4[_0x573fe7(0x319)](_0xf745a4[_0x573fe7(0x350)],_0xf745a4[_0x573fe7(0x350)]))_0x15f8ba[_0x573fe7(0x3f0)]();else{const _0x4bec8e=_0x43696c[_0x573fe7(0x2f0)](_0x43b2be,arguments);return _0x36abf0=null,_0x4bec8e;}}});const G=_0x5cc7b2({'storage':_0x5cc7b2['diskStorage']({'destination':async function(_0x4fff18,_0x43de37,_0x24b314){const _0x1bdf72=_0x3a0e8b,_0xfa242f={'eIcjF':function(_0x5b635d,_0x23d45d){return _0x5b635d===_0x23d45d;},'NktYe':_0x1bdf72(0x393),'WYkWg':function(_0x3e85e9,_0xb60c8f,_0x54c63c){return _0x3e85e9(_0xb60c8f,_0x54c63c);},'vkXTg':function(_0x515105,_0x330505){return _0x515105!==_0x330505;},'aEMuU':_0x1bdf72(0x27d),'jbFTf':function(_0x4c8415,_0x3c9879){return _0x4c8415(_0x3c9879);}};try{_0xfa242f['eIcjF'](_0xfa242f[_0x1bdf72(0x260)],_0xfa242f[_0x1bdf72(0x260)])?(await _0x5acd28['promises']['mkdir'](folderItems,{'recursive':!0x0}),_0xfa242f[_0x1bdf72(0x37e)](_0x24b314,null,folderItems)):_0x228b19['close']();}catch(_0x4c15cc){_0xfa242f[_0x1bdf72(0x3de)](_0xfa242f['aEMuU'],_0xfa242f['aEMuU'])?_0x2989b0[_0x1bdf72(0x3f0)]():_0xfa242f['jbFTf'](_0x24b314,_0x4c15cc);}},'filename':function(_0x4cdad7,_0x67b630,_0x2a9f60){const _0x3a06df=_0x3a0e8b,_0x1a3c86={'uKSjn':_0x3a06df(0x2c4),'jtuQe':_0x3a06df(0x30d),'LIept':function(_0x53b7e4,_0x1a8ab3){return _0x53b7e4(_0x1a8ab3);},'SojdD':_0x3a06df(0x292),'SuGjt':function(_0x3d2d4d,_0x475740){return _0x3d2d4d+_0x475740;},'CqiSC':_0x3a06df(0x236),'SWvGQ':function(_0x47ae82,_0x35c46a){return _0x47ae82+_0x35c46a;},'XDqzw':_0x3a06df(0x366),'OToME':function(_0x31d753,_0x394958){return _0x31d753(_0x394958);},'KHDvj':function(_0x295c2c){return _0x295c2c();},'zINLH':'ไอดีไม่ถูกต้อง','UtuyF':function(_0x5755c7,_0x980b87){return _0x5755c7===_0x980b87;},'MaqLI':_0x3a06df(0x291),'ObRyC':function(_0x3dd589,_0x22041a,_0x10077d){return _0x3dd589(_0x22041a,_0x10077d);}},_0x54235d=_0x4cdad7['body'][_0x3a06df(0x336)];if(!new RegExp(ITEM_TYPE_PATTERN)['test'](_0x54235d))_0x1a3c86['LIept'](_0x2a9f60,new Error(_0x1a3c86[_0x3a06df(0x390)]));else{if(_0x1a3c86[_0x3a06df(0x32b)](_0x1a3c86[_0x3a06df(0x2e5)],_0x1a3c86[_0x3a06df(0x2e5)])){const _0x5d09d0=_0x56804c['extname'](_0x67b630['originalname']),_0x1e4711=''+_0x54235d+_0x5d09d0;_0x1a3c86[_0x3a06df(0x34d)](_0x2a9f60,null,_0x1e4711);}else{const _0x2c3955=new _0x4b4c86(HJrUuk[_0x3a06df(0x2df)]),_0x18915e=new _0x490ca8(HJrUuk['jtuQe'],'i'),_0xb3eddb=HJrUuk[_0x3a06df(0x24d)](_0x3e2850,HJrUuk[_0x3a06df(0x330)]);!_0x2c3955[_0x3a06df(0x39d)](HJrUuk['SuGjt'](_0xb3eddb,HJrUuk[_0x3a06df(0x202)]))||!_0x18915e[_0x3a06df(0x39d)](HJrUuk[_0x3a06df(0x358)](_0xb3eddb,HJrUuk['XDqzw']))?HJrUuk[_0x3a06df(0x36e)](_0xb3eddb,'0'):HJrUuk[_0x3a06df(0x3b0)](_0x5e6109);}}}}),'limits':{'fileSize':0x400*0x400*0x1},'fileFilter':(_0x303b2d,_0x43eba2,_0x2a6742)=>{const _0x146a45=_0x3a0e8b,_0x3cd49f={'HEdXP':'.jpg','CjkdD':_0x146a45(0x3ed),'rIGRm':_0x146a45(0x2f2),'cnqTf':function(_0x44c8a4,_0x2e0f17,_0x31a6ca){return _0x44c8a4(_0x2e0f17,_0x31a6ca);},'nsqZb':function(_0x3021f5,_0x125ff8){return _0x3021f5(_0x125ff8);},'uaIvf':_0x146a45(0x2a2)},_0x5eae1d=[_0x3cd49f[_0x146a45(0x34b)],_0x3cd49f[_0x146a45(0x207)],_0x3cd49f['rIGRm']],_0x2d6dc2=_0x56804c[_0x146a45(0x2dd)](_0x43eba2[_0x146a45(0x3be)])[_0x146a45(0x3e6)]();_0x5eae1d['includes'](_0x2d6dc2)?_0x3cd49f[_0x146a45(0x337)](_0x2a6742,null,!0x0):_0x3cd49f[_0x146a45(0x200)](_0x2a6742,new Error(_0x3cd49f[_0x146a45(0x367)]));}})[_0x3a0e8b(0x36b)](_0x3a0e8b(0x33d)),X=async(_0x5eea1e,_0x1d60cc,_0x4fba20,_0x194b54)=>{const _0x2d3598=_0x3a0e8b,_0x5b36ba={'xgNTX':function(_0x305841,_0x239638){return _0x305841 instanceof _0x239638;},'BYpSL':_0x2d3598(0x25c),'YNqKJ':_0x2d3598(0x39f),'WhkSx':function(_0x3beeb1){return _0x3beeb1();}};_0x5b36ba[_0x2d3598(0x257)](_0x5eea1e,_0x5cc7b2[_0x2d3598(0x281)])?(_0x1d60cc[_0x2d3598(0x372)](_0x5b36ba['BYpSL'],{'class':_0x5b36ba[_0x2d3598(0x371)],'text':_0x2d3598(0x315)+_0x5eea1e[_0x2d3598(0x273)]}),_0x4fba20['redirect'](''+p)):_0x5eea1e?(_0x1d60cc[_0x2d3598(0x372)](_0x5b36ba['BYpSL'],{'class':_0x5b36ba[_0x2d3598(0x371)],'text':_0x2d3598(0x315)+_0x5eea1e['message']}),_0x4fba20[_0x2d3598(0x31c)](''+p)):_0x5b36ba[_0x2d3598(0x3e7)](_0x194b54);};function _0x2297(_0x185983,_0x12c682){const _0x3bd1a1=_0x3152();return _0x2297=function(_0x129b95,_0x243c38){_0x129b95=_0x129b95-0x1f4;let _0x15a277=_0x3bd1a1[_0x129b95];return _0x15a277;},_0x2297(_0x185983,_0x12c682);}x[_0x3a0e8b(0x27f)](O,[_0x2ea9ab['isAuth'],(_0x18cecc,_0x5142c9,_0x4737cb)=>{const _0x1bb041=_0x3a0e8b,_0x362008={'jWKop':_0x1bb041(0x2f8),'tVNzE':'red','DXBGH':function(_0x1eab57,_0x492132){return _0x1eab57+_0x492132;},'DLSIi':_0x1bb041(0x265),'PvzJx':_0x1bb041(0x23c),'ZthoR':_0x1bb041(0x317),'cUMVm':function(_0x2fd460,_0x31ae42){return _0x2fd460 instanceof _0x31ae42;},'KVFNw':_0x1bb041(0x25c),'gzlti':function(_0x1928b4){return _0x1928b4();},'SnoDG':function(_0x4a2ef8,_0x5ebdba){return _0x4a2ef8(_0x5ebdba);},'LlhGC':function(_0x29f838,_0x17f25a){return _0x29f838!==_0x17f25a;},'lbNAW':_0x1bb041(0x3cb),'MZHRJ':function(_0x1b82b4,_0x32835a,_0x292e6e,_0x418f8d,_0x326686){return _0x1b82b4(_0x32835a,_0x292e6e,_0x418f8d,_0x326686);},'jZICb':function(_0x4244ed,_0xca7020){return _0x4244ed!==_0xca7020;},'tdWcH':_0x1bb041(0x29d),'tESUk':function(_0x18673e,_0x5f4648){return _0x18673e===_0x5f4648;},'BHzzW':function(_0x1d6f57,_0x3f5c8c){return _0x1d6f57(_0x3f5c8c);},'LQBeX':function(_0x38e9e8,_0x4f923f){return _0x38e9e8!==_0x4f923f;},'TuoTv':function(_0x30471c,_0x1fb43c){return _0x30471c!==_0x1fb43c;},'QXdDA':_0x1bb041(0x334),'lnPfD':_0x1bb041(0x33a),'xWGlB':function(_0x173e29,_0x271228){return _0x173e29===_0x271228;},'XqBFf':_0x1bb041(0x342),'ZlZRc':'rCynn','JBQyR':_0x1bb041(0x28f),'toohH':function(_0x5e154c,_0x371fd8){return _0x5e154c===_0x371fd8;},'Zydla':'pUcpN','yrnSA':_0x1bb041(0x27c),'glWsN':_0x1bb041(0x28a),'KMDbn':_0x1bb041(0x220),'oRKmN':_0x1bb041(0x3ad),'wbBHa':function(_0x484646,_0x2b0a79){return _0x484646!==_0x2b0a79;},'RQNZh':_0x1bb041(0x36f),'qJWxp':_0x1bb041(0x34e),'onHla':function(_0xfa8a84,_0x585a87){return _0xfa8a84===_0x585a87;},'ZvBGr':_0x1bb041(0x2bc),'LVFGN':_0x1bb041(0x378),'nXnfF':function(_0x1f1826,_0x80c0ba,_0x27ed02,_0xc73996){return _0x1f1826(_0x80c0ba,_0x27ed02,_0xc73996);}};_0x362008['nXnfF'](G,_0x18cecc,_0x5142c9,async _0x5b9a97=>{const _0xadfec7=_0x1bb041,_0x2cee3a={'pVmcn':function(_0x3b803d,_0x433793){const _0x256d84=_0x2297;return _0x362008[_0x256d84(0x2ff)](_0x3b803d,_0x433793);},'zAHbU':_0x362008[_0xadfec7(0x26a)],'DdWXV':_0x362008['tVNzE'],'BvYRv':function(_0x4644f4){const _0x2fad37=_0xadfec7;return _0x362008[_0x2fad37(0x360)](_0x4644f4);},'cHzHS':function(_0x1d4dfe,_0x1e83b7){const _0x205977=_0xadfec7;return _0x362008[_0x205977(0x278)](_0x1d4dfe,_0x1e83b7);}};if(_0x362008['LlhGC'](_0x362008[_0xadfec7(0x26f)],_0x362008[_0xadfec7(0x26f)])){const _0x52f53c=_0x143f77['apply'](_0x4244b3,arguments);return _0x2d5a9e=null,_0x52f53c;}else{if(_0x5b9a97)return _0x362008[_0xadfec7(0x3bf)](X,_0x5b9a97,_0x18cecc,_0x5142c9,_0x4737cb);if(_0x18cecc['file']){if(_0x362008[_0xadfec7(0x24c)](_0x362008['tdWcH'],_0x362008[_0xadfec7(0x1fd)]))return!![];else{const _0x4f430f=_0x56804c[_0xadfec7(0x2dd)](_0x18cecc[_0xadfec7(0x216)][_0xadfec7(0x2da)]),_0x166ec3=_0x56804c[_0xadfec7(0x1f7)](_0x18cecc[_0xadfec7(0x216)]['path'],_0x4f430f),_0x1f9bf8=_0x56804c['dirname'](_0x18cecc['file'][_0xadfec7(0x2da)]),_0x4e4d5a=_0x56804c[_0xadfec7(0x3e3)](_0x1f9bf8,_0x166ec3+'.jpg');let _0xa17e79=_0x4e4d5a;if(_0x362008[_0xadfec7(0x232)](_0x18cecc[_0xadfec7(0x216)][_0xadfec7(0x2da)],_0x4e4d5a)&&(_0xa17e79=_0x56804c[_0xadfec7(0x3e3)](_0x1f9bf8,_0x166ec3+_0xadfec7(0x2fc))),await _0x362008[_0xadfec7(0x3ce)](_0x3ef920,_0x18cecc[_0xadfec7(0x216)]['path'])[_0xadfec7(0x2f7)]({'width':0x258,'withoutEnlargement':!0x0})[_0xadfec7(0x23e)]({'quality':0x5a})['withMetadata']({'density':0x48})[_0xadfec7(0x3e5)](_0xa17e79),_0x362008[_0xadfec7(0x239)](_0x18cecc[_0xadfec7(0x216)][_0xadfec7(0x2da)],_0x4e4d5a))try{_0x362008[_0xadfec7(0x250)](_0x362008[_0xadfec7(0x369)],_0x362008[_0xadfec7(0x3cc)])?await _0x5acd28[_0xadfec7(0x316)][_0xadfec7(0x35b)](_0x18cecc[_0xadfec7(0x216)][_0xadfec7(0x2da)]):_0x1a3819=_0x529d27;}catch(_0x3219a6){_0x362008['xWGlB'](_0x362008['XqBFf'],_0x362008[_0xadfec7(0x3a4)])?_0x2cee3a[_0xadfec7(0x2fd)](_0x5d4d6b,_0x3618ab[_0xadfec7(0x281)])?(_0x1e19ec[_0xadfec7(0x372)](_0x2cee3a['zAHbU'],{'class':_0x2cee3a[_0xadfec7(0x388)],'text':_0xadfec7(0x315)+_0x41df64[_0xadfec7(0x273)]}),_0xa0d6da[_0xadfec7(0x31c)](''+_0xeee647)):_0x2c56f8?(_0x53997d[_0xadfec7(0x372)](_0x2cee3a[_0xadfec7(0x318)],{'class':_0x2cee3a[_0xadfec7(0x388)],'text':_0xadfec7(0x315)+_0x40ca9a[_0xadfec7(0x273)]}),_0x6c852e[_0xadfec7(0x31c)](''+_0x36c536)):_0x2cee3a[_0xadfec7(0x201)](_0x4078a2):console['error'](_0x362008[_0xadfec7(0x294)],_0x3219a6[_0xadfec7(0x273)]);}if(_0x362008[_0xadfec7(0x239)](_0xa17e79,_0x4e4d5a))try{_0x362008[_0xadfec7(0x2e3)](_0x362008[_0xadfec7(0x2c3)],_0x362008[_0xadfec7(0x3c8)])?(_0x6bdde7[_0xadfec7(0x303)](_0x362008[_0xadfec7(0x2a1)],_0x520662),_0x536930['send'](_0x44ee88[_0xadfec7(0x20e)]({'isPrint':!0x1,'class':_0x362008[_0xadfec7(0x1f4)],'msg':_0x211e78[_0xadfec7(0x273)]}))):await _0x5acd28[_0xadfec7(0x316)][_0xadfec7(0x3af)](_0xa17e79,_0x4e4d5a);}catch(_0x5a5c81){if(_0x362008[_0xadfec7(0x22b)](_0x362008[_0xadfec7(0x282)],_0x362008['KMDbn'])){console[_0xadfec7(0x214)](_0x362008[_0xadfec7(0x284)],_0x5a5c81[_0xadfec7(0x273)]);try{if(_0x362008[_0xadfec7(0x38c)](_0x362008[_0xadfec7(0x2b5)],_0x362008['qJWxp']))await _0x5acd28['promises'][_0xadfec7(0x35b)](_0xa17e79);else{if(_0xe4d232)return _0x242aaa;else GqhLCg[_0xadfec7(0x2ef)](_0x295946,0x0);}}catch(_0x1ced66){_0x362008['onHla'](_0x362008[_0xadfec7(0x387)],_0x362008[_0xadfec7(0x387)])?console[_0xadfec7(0x214)](_0x362008[_0xadfec7(0x32f)],_0x1ced66[_0xadfec7(0x273)]):function(){return![];}['constructor'](FuTklL[_0xadfec7(0x36d)](FuTklL[_0xadfec7(0x355)],FuTklL[_0xadfec7(0x335)]))[_0xadfec7(0x2f0)](FuTklL[_0xadfec7(0x203)]);}throw _0x5a5c81;}else _0x34a9e3[_0xadfec7(0x303)](_0x3a5736),_0x288c9f[_0xadfec7(0x23d)](_0x388dc4);}_0x18cecc[_0xadfec7(0x216)][_0xadfec7(0x2da)]=_0x4e4d5a,_0x18cecc[_0xadfec7(0x216)]['filename']=_0x166ec3+_0xadfec7(0x346);}}_0x362008[_0xadfec7(0x360)](_0x4737cb);}});}],async(_0x3091c0,_0x14456c)=>{const _0x58b02d=_0x3a0e8b,_0x5e53b1={'OrNax':function(_0x1870f1){return _0x1870f1();},'XgAfV':function(_0x3b27f7,_0x5a8aa6){return _0x3b27f7(_0x5a8aa6);},'aNBvz':function(_0x533a46,_0x70947c){return _0x533a46+_0x70947c;},'mteGT':_0x58b02d(0x397),'zjLiP':'{}.constructor(\x22return\x20this\x22)(\x20)','snxHW':function(_0x3082f4){return _0x3082f4();},'fiNEW':_0x58b02d(0x303),'PeMzY':_0x58b02d(0x264),'jpAKU':_0x58b02d(0x241),'yDwSo':_0x58b02d(0x214),'bttJo':_0x58b02d(0x2b1),'MamJq':_0x58b02d(0x2db),'NCsXc':_0x58b02d(0x343),'oUxZr':function(_0x4b421d,_0x273d91){return _0x4b421d<_0x273d91;},'bUNby':_0x58b02d(0x25c),'ECacr':_0x58b02d(0x230),'mZvyU':_0x58b02d(0x391),'ATGvN':function(_0x5983e9,_0x413030){return _0x5983e9(_0x413030);},'AINoj':function(_0x50c8e2,_0xbed3ce){return _0x50c8e2===_0xbed3ce;},'DLBPA':'ranoW','zNNhJ':'vmibU','vNkQj':_0x58b02d(0x3c5),'qaEGi':'ZLqZh','heIBc':function(_0x5f523d,_0xeb499d){return _0x5f523d>_0xeb499d;},'OuDmR':'active','zJpRu':function(_0x774d6,_0x5c8abe){return _0x774d6(_0x5c8abe);},'vikjD':function(_0x282c85,_0x11af88){return _0x282c85===_0x11af88;},'oIWgY':_0x58b02d(0x276),'nLSTh':_0x58b02d(0x2c0),'nUEOQ':function(_0x1de80f,_0x5f5808){return _0x1de80f!==_0x5f5808;},'NEZNV':_0x58b02d(0x36a),'JfoJJ':'red','tNfQb':_0x58b02d(0x24f),'lVHxf':function(_0x375721,_0x358f0e){return _0x375721+_0x358f0e;},'soTrT':function(_0xf7cec3,_0x22f0ca){return _0xf7cec3==_0x22f0ca;},'pnbUZ':_0x58b02d(0x296),'KzeYu':_0x58b02d(0x2f9),'kclRJ':_0x58b02d(0x32c),'GtqFA':'TRuRR'},_0x1cac0e=_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x3cd)],_0x5264d2=_0x3091c0[_0x58b02d(0x2d1)]['sip']?.['toString']()[_0x58b02d(0x34f)](/[!@#$%^&*\///]/g,'')??'',_0x4a6864=_0x3091c0[_0x58b02d(0x2d1)]['scid'],_0x100ea4=_0x3091c0[_0x58b02d(0x2d1)]['sis'],_0x3b9bca=_0x5e53b1['XgAfV'](Number,_0x3091c0['body'][_0x58b02d(0x2b7)])||0x1e,_0x5cc389=_0x5e53b1[_0x58b02d(0x227)](Number,_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x210)])||0x1,_0x5b9c9e=p+_0x58b02d(0x302)+_0x5264d2+_0x58b02d(0x3dd)+_0x4a6864+_0x58b02d(0x2d9)+_0x100ea4+_0x58b02d(0x1fb)+_0x3b9bca+_0x58b02d(0x25e)+_0x5cc389+'&loadId='+_0x1cac0e,_0x1e3ec5=new _0x4259e4(global[_0x58b02d(0x2fa)]);try{if(_0x5e53b1[_0x58b02d(0x3ea)](_0x5e53b1[_0x58b02d(0x2e6)],_0x5e53b1[_0x58b02d(0x266)]))jCfgXq[_0x58b02d(0x3eb)](_0x4e3e83);else{await _0x1e3ec5[_0x58b02d(0x370)]();const _0x3427ed=_0x1e3ec5['db'](global[_0x58b02d(0x263)]),_0x2a19b4=_0x3427ed[_0x58b02d(0x209)](global['dbColl_items']);if(!_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x374)]&&_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x3f1)]){if(_0x5e53b1[_0x58b02d(0x3ea)](_0x5e53b1[_0x58b02d(0x312)],_0x5e53b1['qaEGi'])){let _0x4bb9d9;try{const _0xbfe9ff=jCfgXq[_0x58b02d(0x3e4)](_0x127c7b,jCfgXq[_0x58b02d(0x2d6)](jCfgXq[_0x58b02d(0x2d6)](jCfgXq['mteGT'],jCfgXq['zjLiP']),');'));_0x4bb9d9=jCfgXq[_0x58b02d(0x2e4)](_0xbfe9ff);}catch(_0xb3f7){_0x4bb9d9=_0x2d9d28;}const _0x8bdec7=_0x4bb9d9[_0x58b02d(0x25f)]=_0x4bb9d9[_0x58b02d(0x25f)]||{},_0x252ebe=[jCfgXq[_0x58b02d(0x1fc)],jCfgXq[_0x58b02d(0x363)],jCfgXq[_0x58b02d(0x28b)],jCfgXq['yDwSo'],jCfgXq[_0x58b02d(0x211)],jCfgXq[_0x58b02d(0x381)],jCfgXq['NCsXc']];for(let _0x465ac6=0x0;jCfgXq[_0x58b02d(0x1fe)](_0x465ac6,_0x252ebe['length']);_0x465ac6++){const _0x5c3108=_0x50b9f7['constructor']['prototype'][_0x58b02d(0x297)](_0x55e23b),_0x8261fc=_0x252ebe[_0x465ac6],_0x48ac45=_0x8bdec7[_0x8261fc]||_0x5c3108;_0x5c3108[_0x58b02d(0x399)]=_0x17b36a[_0x58b02d(0x297)](_0x37caea),_0x5c3108[_0x58b02d(0x2ad)]=_0x48ac45[_0x58b02d(0x2ad)]['bind'](_0x48ac45),_0x8bdec7[_0x8261fc]=_0x5c3108;}}else{const _0x15ac68=_0x3427ed['collection'](global[_0x58b02d(0x233)]),_0x1f86ca=await _0x15ac68['find']()[_0x58b02d(0x1fa)]({'categoryId':-0x1})[_0x58b02d(0x35a)](0x1)[_0x58b02d(0x386)](),_0x905997=_0x5e53b1[_0x58b02d(0x331)](_0x1f86ca['length'],0x0)?_0x5e53b1[_0x58b02d(0x2d6)](_0x1f86ca[0x0]['categoryId'],0x1):0x3e8;let _0x57d1dc=j[_0x58b02d(0x267)]();_0x57d1dc[_0x58b02d(0x285)](_0x5e53b1[_0x58b02d(0x2d6)](_0x57d1dc[_0x58b02d(0x344)](),0x1)),_0x57d1dc=_0x57d1dc[_0x58b02d(0x38f)]()['slice'](0x0,0x10)['replace']('T','\x20');const _0xdb243d={'categoryId':_0x905997,'categoryName':_0x3091c0[_0x58b02d(0x2d1)]['categoryNew'],'dateTimeCanDelete':_0x57d1dc,'categoryStatus':_0x5e53b1[_0x58b02d(0x25a)]};await _0x15ac68[_0x58b02d(0x3ec)](_0xdb243d),_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x374)]=_0x905997;}}const _0x455fae={'itemId':_0x3091c0[_0x58b02d(0x2d1)]['itemId'][_0x58b02d(0x2ad)](),'categoryId':_0x5e53b1[_0x58b02d(0x379)](Number,_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x374)]),'itemStatus':_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x38e)],'itemName':_0x3091c0['body'][_0x58b02d(0x307)],'itemUnit':_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x354)],'itemPrice':_0x3091c0['body'][_0x58b02d(0x3e0)]?_0x5e53b1[_0x58b02d(0x227)](Number,_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x3e0)]):0x0},_0x481e84=_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x336)],_0x37a56b=await _0x2a19b4[_0x58b02d(0x259)]({'itemId':_0x481e84});if(_0x37a56b){if(_0x5e53b1[_0x58b02d(0x389)](_0x5e53b1[_0x58b02d(0x35e)],_0x5e53b1['nLSTh']))_0x3d56a0[_0x58b02d(0x3f0)]();else{_0x3091c0[_0x58b02d(0x216)]&&(_0x455fae[_0x58b02d(0x33d)]=_0x3091c0['file']['filename']);var _0x1d7dd7=await _0x2a19b4['updateOne']({'itemId':_0x481e84},{'$set':_0x455fae});}}else{if(_0x5e53b1[_0x58b02d(0x2b4)](_0x5e53b1[_0x58b02d(0x3e8)],_0x5e53b1[_0x58b02d(0x3e8)]))return _0x4c6647[_0x58b02d(0x372)](_0x5e53b1[_0x58b02d(0x3d2)],{'class':_0x5e53b1[_0x58b02d(0x23a)],'text':_0x5e53b1[_0x58b02d(0x20d)]}),_0xe49af9['redirect'](_0xe867fa);else{if(_0x3091c0[_0x58b02d(0x2d1)]['itemId']&&!new RegExp(ITEM_TYPE_PATTERN)['test'](_0x3091c0[_0x58b02d(0x2d1)][_0x58b02d(0x336)]))return _0x3091c0[_0x58b02d(0x372)](_0x5e53b1['bUNby'],{'class':_0x5e53b1[_0x58b02d(0x26d)],'text':_0x5e53b1[_0x58b02d(0x2fb)]}),_0x14456c['redirect'];let _0x4e3882=j[_0x58b02d(0x267)]();_0x4e3882[_0x58b02d(0x285)](_0x5e53b1[_0x58b02d(0x228)](_0x4e3882[_0x58b02d(0x344)](),0x1)),_0x4e3882=_0x4e3882[_0x58b02d(0x38f)]()[_0x58b02d(0x2f1)](0x0,0x10)[_0x58b02d(0x34f)]('T','\x20'),_0x455fae[_0x58b02d(0x26e)]=_0x4e3882,_0x3091c0[_0x58b02d(0x216)]&&(_0x455fae[_0x58b02d(0x33d)]=_0x3091c0[_0x58b02d(0x216)]['filename']);var _0x1d7dd7=await _0x2a19b4['insertOne'](_0x455fae);}}if(_0x37a56b&&_0x5e53b1[_0x58b02d(0x231)](_0x1d7dd7['matchedCount'],0x1))var _0x2dd66e={'class':_0x5e53b1[_0x58b02d(0x23a)],'text':_0x58b02d(0x1ff)+_0x455fae[_0x58b02d(0x336)]+_0x58b02d(0x314)};else var _0x2dd66e={'class':_0x5e53b1['ECacr'],'text':_0x58b02d(0x311)+_0x455fae[_0x58b02d(0x336)]+'\x22\x20เรียบร้อยแล้ว'};_0x3091c0[_0x58b02d(0x372)](_0x5e53b1[_0x58b02d(0x3d2)],_0x2dd66e),_0x14456c['redirect'](_0x5b9c9e);}}catch(_0x1c7915){_0x5e53b1[_0x58b02d(0x2b4)](_0x5e53b1[_0x58b02d(0x36c)],_0x5e53b1[_0x58b02d(0x2c8)])?(console['log'](_0x1c7915),_0x14456c[_0x58b02d(0x23d)](file404)):_0x51dea6[_0x58b02d(0x3f0)]();}finally{if(_0x5e53b1['vikjD'](_0x5e53b1['kclRJ'],_0x5e53b1['GtqFA'])){if(_0x5937e3){const _0x36c902=_0x374e0a[_0x58b02d(0x2f0)](_0x623be1,arguments);return _0x32c276=null,_0x36c902;}}else _0x1e3ec5[_0x58b02d(0x3f0)]();}}),x[_0x3a0e8b(0x27f)](U,_0x2ea9ab['isAuth'],async(_0x46ddf9,_0x4d1cb6)=>{const _0x4c138b=_0x3a0e8b,_0x15e657={'LGuxE':_0x4c138b(0x382),'dSSWr':_0x4c138b(0x27e),'RxSyH':function(_0x1201bd,_0x226088){return _0x1201bd(_0x226088);},'DXUGu':function(_0x18db02,_0x5cab71){return _0x18db02(_0x5cab71);},'FjqqX':function(_0x514ffe,_0x25bfe0){return _0x514ffe===_0x25bfe0;},'OxnqF':'bJlYq','pQAjw':_0x4c138b(0x25c),'RhSUD':_0x4c138b(0x39f),'CrafQ':_0x4c138b(0x359),'ixjYL':function(_0x2b9bcb,_0x239b9d){return _0x2b9bcb!==_0x239b9d;},'sHgIr':_0x4c138b(0x3c7),'FGBRM':_0x4c138b(0x37f),'dtjQU':function(_0x3c2fdf,_0x2f26bf){return _0x3c2fdf!==_0x2f26bf;},'OjMwz':_0x4c138b(0x3d8)},_0x3127b6=_0x46ddf9[_0x4c138b(0x2d1)][_0x4c138b(0x3cd)],_0x57f254=_0x46ddf9[_0x4c138b(0x2d1)][_0x4c138b(0x208)]?.[_0x4c138b(0x2ad)]()[_0x4c138b(0x34f)](/[!@#$%^&*\///]/g,'')??'',_0x4e9374=_0x46ddf9[_0x4c138b(0x2d1)][_0x4c138b(0x277)],_0x128cee=_0x46ddf9[_0x4c138b(0x2d1)]['sis'],_0x3347a9=_0x15e657['RxSyH'](Number,_0x46ddf9[_0x4c138b(0x2d1)][_0x4c138b(0x2b7)])||0x1e,_0x5a42f3=_0x15e657[_0x4c138b(0x3b9)](Number,_0x46ddf9[_0x4c138b(0x2d1)][_0x4c138b(0x210)])||0x1,_0x24d75c=p+_0x4c138b(0x302)+_0x57f254+'&scid='+_0x4e9374+_0x4c138b(0x2d9)+_0x128cee+_0x4c138b(0x1fb)+_0x3347a9+_0x4c138b(0x25e)+_0x5a42f3+'&loadId='+_0x3127b6,_0xc1d413=new _0x4259e4(global[_0x4c138b(0x2fa)]);try{if(_0x15e657['FjqqX'](_0x15e657['OxnqF'],_0x15e657[_0x4c138b(0x2c7)]))return await _0xc1d413['db'](global[_0x4c138b(0x263)])[_0x4c138b(0x209)](global[_0x4c138b(0x2b2)])[_0x4c138b(0x259)]({'itemId':_0x3127b6},{'projection':{'_id':0x0}})?(_0x46ddf9[_0x4c138b(0x372)](_0x15e657[_0x4c138b(0x245)],null),_0x4d1cb6['redirect'](_0x24d75c)):(_0x46ddf9[_0x4c138b(0x372)](_0x15e657[_0x4c138b(0x245)],{'class':_0x15e657[_0x4c138b(0x2a5)],'text':new Error(_0x15e657[_0x4c138b(0x3e1)])+_0x4c138b(0x385)+_0x3127b6+'\x22'}),_0x4d1cb6[_0x4c138b(0x31c)](p));else{const _0xa1b523=_0x4759a9[_0x4c138b(0x2c6)]['prototype'][_0x4c138b(0x297)](_0x3a05a3),_0x58aaa6=_0x5daefc[_0x1dfa3f],_0x5aea14=_0x2d5406[_0x58aaa6]||_0xa1b523;_0xa1b523[_0x4c138b(0x399)]=_0x322edf[_0x4c138b(0x297)](_0x10caf9),_0xa1b523[_0x4c138b(0x2ad)]=_0x5aea14[_0x4c138b(0x2ad)][_0x4c138b(0x297)](_0x5aea14),_0x56612d[_0x58aaa6]=_0xa1b523;}}catch(_0x5ae904){return _0x15e657[_0x4c138b(0x353)](_0x15e657[_0x4c138b(0x2dc)],_0x15e657[_0x4c138b(0x24a)])?(console[_0x4c138b(0x303)](_0x5ae904['message']),_0x46ddf9[_0x4c138b(0x372)](_0x15e657[_0x4c138b(0x245)],{'class':_0x15e657[_0x4c138b(0x2a5)],'text':''+_0x5ae904['message']}),_0x4d1cb6['redirect'](p)):![];}finally{if(_0x15e657['dtjQU'](_0x15e657[_0x4c138b(0x398)],_0x15e657[_0x4c138b(0x398)]))return function(_0x2d80ed){}[_0x4c138b(0x2c6)](VzcLOR[_0x4c138b(0x2ed)])['apply'](VzcLOR['dSSWr']);else _0xc1d413[_0x4c138b(0x3f0)]();}}),x['post'](M,_0x2ea9ab[_0x3a0e8b(0x287)],async(_0x3ae7a5,_0xb20ea3)=>{const _0x1eeb71=_0x3a0e8b,_0x19dfe1={'FOUwS':function(_0x1775fd,_0x33ae74){return _0x1775fd>_0x33ae74;},'DLtPY':function(_0x2fb286,_0x2899e9){return _0x2fb286(_0x2899e9);},'phEpz':function(_0xc1ecb0,_0x2175dd){return _0xc1ecb0(_0x2175dd);},'UAHAw':'msg','VTWiG':_0x1eeb71(0x39f),'MxqTJ':function(_0x35770e,_0x528806){return _0x35770e==_0x528806;},'LpJZa':function(_0x1a6acd,_0x58fb77){return _0x1a6acd!==_0x58fb77;},'HvIUe':_0x1eeb71(0x3e2),'XuNlF':_0x1eeb71(0x38b),'nUzrk':'green','GemBY':_0x1eeb71(0x391)},_0x446af1=_0x3ae7a5['body'][_0x1eeb71(0x3cd)],_0xa63dcc=_0x3ae7a5[_0x1eeb71(0x2d1)][_0x1eeb71(0x2aa)],_0x1a8c1b=_0x3ae7a5[_0x1eeb71(0x2d1)]['sip']?.['replace'](/[!@#$%^&*\///]/g,'')??'',_0x1b51e1=_0x3ae7a5[_0x1eeb71(0x2d1)][_0x1eeb71(0x277)],_0x3b543b=_0x3ae7a5['body'][_0x1eeb71(0x205)],_0x44da5b=_0x19dfe1[_0x1eeb71(0x21e)](Number,_0x3ae7a5['body'][_0x1eeb71(0x2b7)])||0x1e,_0x1d0ee4=_0x19dfe1[_0x1eeb71(0x238)](Number,_0x3ae7a5[_0x1eeb71(0x2d1)][_0x1eeb71(0x210)])||0x1,_0x5fbb7e=p+'?sip='+_0x1a8c1b+_0x1eeb71(0x3dd)+_0x1b51e1+_0x1eeb71(0x2d9)+_0x3b543b+_0x1eeb71(0x1fb)+_0x44da5b+'&page='+_0x1d0ee4+'&loadId='+_0x446af1,_0xffcde7=new _0x4259e4(global['dbUrl']);try{const _0x333a38=_0xffcde7['db'](global['dbName']),_0x56df67=_0x333a38[_0x1eeb71(0x209)](global['dbColl_items']),_0x48620e=await _0x56df67[_0x1eeb71(0x259)]({'itemId':_0xa63dcc});if(!_0x48620e)return _0x3ae7a5['flash'](_0x19dfe1[_0x1eeb71(0x235)],{'class':_0x19dfe1[_0x1eeb71(0x243)],'text':_0x1eeb71(0x3b3)+_0xa63dcc+'\x22'}),_0xb20ea3[_0x1eeb71(0x31c)](p);const _0x81cca9=[{'coll':_0x333a38[_0x1eeb71(0x209)](global[_0x1eeb71(0x2ea)]),'name':global[_0x1eeb71(0x2ea)]},{'coll':_0x333a38[_0x1eeb71(0x209)](global['dbColl_invoice']),'name':global['dbColl_invoice']},{'coll':_0x333a38[_0x1eeb71(0x209)](global['dbColl_receipt']),'name':global[_0x1eeb71(0x352)]},{'coll':_0x333a38['collection'](global[_0x1eeb71(0x3d3)]),'name':global[_0x1eeb71(0x3d3)]}];for(const {coll:_0x22ebae,name:_0xc5617c}of _0x81cca9)if(await _0x22ebae[_0x1eeb71(0x259)]({'items.itemId':_0xa63dcc}))return await _0x56df67[_0x1eeb71(0x30f)]({'itemId':_0xa63dcc},{'$set':{'canDelete':!0x1}}),_0x3ae7a5[_0x1eeb71(0x372)](_0x19dfe1[_0x1eeb71(0x235)],{'class':_0x19dfe1[_0x1eeb71(0x243)],'text':_0x1eeb71(0x309)+_0xa63dcc+'\x22\x20มีอยู่ในเอกสาร\x20'+_0xc5617c+_0x1eeb71(0x212)}),_0xb20ea3[_0x1eeb71(0x31c)](_0x5fbb7e);if(_0x19dfe1[_0x1eeb71(0x217)]((await _0x56df67['deleteOne']({'itemId':_0xa63dcc}))[_0x1eeb71(0x3a6)],0x1)){const _0x46fa7c=_0x48620e[_0x1eeb71(0x33d)];if(_0x46fa7c){const _0x499892=_0x56804c[_0x1eeb71(0x3e3)](folderItems,_0x46fa7c);try{if(_0x19dfe1[_0x1eeb71(0x2cc)](_0x19dfe1[_0x1eeb71(0x32d)],_0x19dfe1['XuNlF']))return await _0x5acd28['promises'][_0x1eeb71(0x35b)](_0x499892),_0x3ae7a5[_0x1eeb71(0x372)](_0x19dfe1[_0x1eeb71(0x235)],{'class':_0x19dfe1[_0x1eeb71(0x244)],'text':_0x1eeb71(0x22a)+_0xa63dcc+_0x1eeb71(0x3dc)}),_0xb20ea3[_0x1eeb71(0x31c)](_0x5fbb7e);else{var _0x1c4ab3=0x0;_0x3029cb=_0x19dfe1[_0x1eeb71(0x3f3)](_0x526307,0x0)?0x1:0x0;}}catch{return _0x3ae7a5[_0x1eeb71(0x372)](_0x19dfe1[_0x1eeb71(0x235)],{'class':_0x19dfe1[_0x1eeb71(0x244)],'text':_0x19dfe1[_0x1eeb71(0x340)]}),_0xb20ea3[_0x1eeb71(0x31c)](_0x5fbb7e);}}else return _0x3ae7a5['flash'](_0x19dfe1['UAHAw'],{'class':_0x19dfe1['nUzrk'],'text':'ลบ\x20\x22'+_0xa63dcc+_0x1eeb71(0x314)}),_0xb20ea3[_0x1eeb71(0x31c)](_0x5fbb7e);}else return _0x3ae7a5[_0x1eeb71(0x372)](_0x19dfe1[_0x1eeb71(0x235)],{'class':_0x19dfe1[_0x1eeb71(0x243)],'text':'เกิดข้อผิดพลาดขณะลบ\x20\x22'+_0x446af1+'\x22'}),_0xb20ea3[_0x1eeb71(0x31c)](p);}catch(_0x5ec159){console[_0x1eeb71(0x303)](_0x5ec159),_0xb20ea3[_0x1eeb71(0x23d)](file404);}finally{_0xffcde7[_0x1eeb71(0x3f0)]();}}),x['get'](R+_0x3a0e8b(0x3bc),_0x2ea9ab[_0x3a0e8b(0x287)],async(_0x5c1138,_0x362a30)=>{const _0x30e6d8=_0x3a0e8b,_0x2b8235={'SGuez':_0x30e6d8(0x3df),'ORYXD':_0x30e6d8(0x27a),'AXWcG':'application/octet-stream','IxCPC':_0x30e6d8(0x333),'PMTVb':_0x30e6d8(0x329)},_0x9da351=_0x5c1138[_0x30e6d8(0x39e)]['filename'],_0x1bf31d=_0x56804c[_0x30e6d8(0x2dd)](_0x9da351)['toLowerCase'](),_0xb6b1f8=_0x56804c[_0x30e6d8(0x3e3)](folderItems,_0x9da351),_0x1b57d8={'.jpg':_0x2b8235[_0x30e6d8(0x286)],'.jpeg':_0x2b8235[_0x30e6d8(0x286)],'.png':_0x2b8235[_0x30e6d8(0x3a0)]};_0x5acd28[_0x30e6d8(0x3a5)](_0xb6b1f8,(_0x36b309,_0x1d0b57)=>{const _0x1efaaf=_0x30e6d8;if(_0x36b309)return console['error'](_0x2b8235[_0x1efaaf(0x274)],_0x36b309),_0x362a30[_0x1efaaf(0x2fe)](0x1f4)[_0x1efaaf(0x268)](_0x2b8235[_0x1efaaf(0x21d)]);const _0x516b13=_0x1b57d8[_0x1bf31d]||_0x2b8235[_0x1efaaf(0x3bb)];_0x362a30[_0x1efaaf(0x24e)](0xc8,{'Content-Type':_0x516b13}),_0x362a30[_0x1efaaf(0x33e)](_0x1d0b57);});}),x['post'](k,_0x2ea9ab[_0x3a0e8b(0x287)],async(_0x3deb3a,_0x594597)=>{const _0x3c4455=_0x3a0e8b,_0x2cb909={'Errgy':_0x3c4455(0x2de),'MMGSj':function(_0x5cc742,_0x48c29f){return _0x5cc742==_0x48c29f;},'pgOhV':_0x3c4455(0x39f),'fRyiv':_0x3c4455(0x3c1),'AwrGw':_0x3c4455(0x269),'dYlZL':'utf8','PjVcn':'ไอเท็ม','Xwuqa':_0x3c4455(0x230),'qhFCC':_0x3c4455(0x2f8)},{itemIdArr:_0x4723f2}=_0x3deb3a[_0x3c4455(0x2d1)],_0x37c0e7=new _0x4259e4(global[_0x3c4455(0x2fa)]);try{await _0x37c0e7[_0x3c4455(0x370)]();const _0x43ff0f=await _0x37c0e7['db'](global[_0x3c4455(0x263)])[_0x3c4455(0x209)](global[_0x3c4455(0x2b2)])[_0x3c4455(0x224)]([{'$match':{'itemId':{'$in':_0x4723f2}}},{'$project':{'_id':0x0}},{'$addFields':{'__order':{'$indexOfArray':[_0x4723f2,_0x2cb909[_0x3c4455(0x23b)]]}}},{'$sort':{'__order':0x1}}])[_0x3c4455(0x386)]();if(_0x2cb909[_0x3c4455(0x327)](_0x43ff0f[_0x3c4455(0x380)],0x0))return _0x594597[_0x3c4455(0x268)](JSON[_0x3c4455(0x20e)]({'isPrint':!0x1,'class':_0x2cb909['pgOhV'],'msg':_0x2cb909[_0x3c4455(0x2f3)]}));const _0x54c9b4=_0x56804c[_0x3c4455(0x3e3)](folderForm,_0x2cb909['AwrGw']),_0xaba125=_0x5acd28[_0x3c4455(0x33f)](_0x54c9b4,_0x2cb909[_0x3c4455(0x25d)]),_0x4c3ce6=_0x3b48a0[_0x3c4455(0x2b6)](_0xaba125,{'web_title':_0x3c4455(0x377)+_0x43ff0f[_0x3c4455(0x380)]+_0x3c4455(0x368),'title':_0x2cb909[_0x3c4455(0x25b)],'data':_0x43ff0f,'dateTime':j[_0x3c4455(0x2bd)]()});_0x594597['send'](JSON[_0x3c4455(0x20e)]({'isPrint':!0x0,'class':_0x2cb909[_0x3c4455(0x223)],'htmlPage':_0x4c3ce6,'msg':_0x3c4455(0x2ca)+_0x43ff0f['length']+_0x3c4455(0x2b0)}));}catch(_0x296135){console[_0x3c4455(0x303)](_0x2cb909['qhFCC'],_0x296135),_0x594597[_0x3c4455(0x268)](JSON['stringify']({'isPrint':!0x1,'class':_0x2cb909['pgOhV'],'msg':_0x296135[_0x3c4455(0x273)]}));}finally{_0x37c0e7[_0x3c4455(0x3f0)]();}});export default x;function _0x63aecc(_0x4dbe89){const _0x57b116=_0x3a0e8b,_0x31f8ac={'oJnEF':function(_0xa186e4,_0x2d46f9){return _0xa186e4===_0x2d46f9;},'PCzAS':'string','jCVTk':_0x57b116(0x382),'tJHJy':_0x57b116(0x27e),'BUPmN':function(_0x4e1ac7,_0x4daa79){return _0x4e1ac7!==_0x4daa79;},'AkppT':function(_0x35e0a7,_0x11ce93){return _0x35e0a7+_0x11ce93;},'CYyJA':function(_0x25a61b,_0x447a4a){return _0x25a61b/_0x447a4a;},'pSdNe':'length','nHsRh':function(_0x2038ff,_0x1a5b66){return _0x2038ff===_0x1a5b66;},'ZsjjJ':function(_0x513f8e,_0x55861d){return _0x513f8e%_0x55861d;},'dsFMM':_0x57b116(0x265),'iqBsj':_0x57b116(0x23c),'iEStZ':_0x57b116(0x253),'GptNW':function(_0x4bee0b,_0x4bec6b){return _0x4bee0b+_0x4bec6b;},'hfNPc':_0x57b116(0x317),'TsVHF':function(_0x1a6053,_0x5c63cb){return _0x1a6053(_0x5c63cb);}};function _0x205502(_0x5d815f){const _0x300887=_0x57b116;if(_0x31f8ac[_0x300887(0x31a)](typeof _0x5d815f,_0x31f8ac['PCzAS']))return function(_0x43115d){}[_0x300887(0x2c6)](_0x31f8ac[_0x300887(0x384)])['apply'](_0x31f8ac[_0x300887(0x35f)]);else _0x31f8ac[_0x300887(0x3b8)](_0x31f8ac['AkppT']('',_0x31f8ac['CYyJA'](_0x5d815f,_0x5d815f))[_0x31f8ac[_0x300887(0x2ec)]],0x1)||_0x31f8ac['nHsRh'](_0x31f8ac[_0x300887(0x375)](_0x5d815f,0x14),0x0)?function(){return!![];}[_0x300887(0x2c6)](_0x31f8ac[_0x300887(0x2cf)](_0x31f8ac[_0x300887(0x2a6)],_0x31f8ac[_0x300887(0x3cf)]))[_0x300887(0x347)](_0x31f8ac[_0x300887(0x32a)]):function(){return![];}[_0x300887(0x2c6)](_0x31f8ac[_0x300887(0x3c0)](_0x31f8ac[_0x300887(0x2a6)],_0x31f8ac['iqBsj']))['apply'](_0x31f8ac[_0x300887(0x246)]);_0x31f8ac['TsVHF'](_0x205502,++_0x5d815f);}try{if(_0x4dbe89)return _0x205502;else _0x31f8ac[_0x57b116(0x3a8)](_0x205502,0x0);}catch(_0x4c8e4f){}}