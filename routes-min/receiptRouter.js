function _0x9ada(_0x53b56d,_0x15c260){const _0x52e2e3=_0x34bf();return _0x9ada=function(_0x4de5a3,_0x2b5d35){_0x4de5a3=_0x4de5a3-0xa7;let _0x152c5c=_0x52e2e3[_0x4de5a3];return _0x152c5c;},_0x9ada(_0x53b56d,_0x15c260);}const _0x52e118=_0x9ada;(function(_0x2f56f9,_0x553e69){const _0x17c57d=_0x9ada,_0x26b9e1=_0x2f56f9();while(!![]){try{const _0x2a87dd=parseInt(_0x17c57d(0x19f))/0x1+-parseInt(_0x17c57d(0x10e))/0x2+parseInt(_0x17c57d(0x16f))/0x3+parseInt(_0x17c57d(0x102))/0x4+-parseInt(_0x17c57d(0x173))/0x5+parseInt(_0x17c57d(0x17b))/0x6*(-parseInt(_0x17c57d(0x135))/0x7)+-parseInt(_0x17c57d(0x168))/0x8*(-parseInt(_0x17c57d(0xc4))/0x9);if(_0x2a87dd===_0x553e69)break;else _0x26b9e1['push'](_0x26b9e1['shift']());}catch(_0x4ba62e){_0x26b9e1['push'](_0x26b9e1['shift']());}}}(_0x34bf,0x7f2d3));const _0x251631=(function(){const _0x205155=_0x9ada,_0xa9b18={'YzMOy':function(_0xf502d2,_0x26d4ba){return _0xf502d2+_0x26d4ba;},'zODgi':_0x205155(0x137),'meQbd':_0x205155(0xcd),'wixIX':_0x205155(0xcc),'HNxqP':function(_0x30e973,_0x3f1402){return _0x30e973===_0x3f1402;},'KBcmr':_0x205155(0xab),'sMUhn':function(_0x37c4b2,_0x2f4cfa){return _0x37c4b2!==_0x2f4cfa;},'MuggW':_0x205155(0x10b),'BGlPy':function(_0x55934f,_0x38d72d){return _0x55934f(_0x38d72d);},'gzofd':function(_0x4f4fa2,_0x45013a){return _0x4f4fa2!==_0x45013a;},'upeoL':'MVude'};let _0x275fd3=!![];return function(_0x15bbf2,_0x5cb4a1){const _0x28d3f6=_0x205155,_0x2f72e1={'YYxfx':function(_0x47aefd,_0x2d1cdb){const _0x46695b=_0x9ada;return _0xa9b18[_0x46695b(0xb5)](_0x47aefd,_0x2d1cdb);}};if(_0xa9b18[_0x28d3f6(0x134)](_0xa9b18[_0x28d3f6(0xc8)],_0xa9b18[_0x28d3f6(0xc8)]))(function(){return!![];}['constructor'](_0xa9b18[_0x28d3f6(0xde)](_0xa9b18['zODgi'],_0xa9b18[_0x28d3f6(0x186)]))[_0x28d3f6(0x157)](_0xa9b18[_0x28d3f6(0x138)]));else{const _0x15d365=_0x275fd3?function(){const _0x49d592=_0x28d3f6;if(_0xa9b18[_0x49d592(0x1a4)](_0xa9b18[_0x49d592(0x103)],_0xa9b18['KBcmr'])){if(_0x5cb4a1){if(_0xa9b18[_0x49d592(0xbc)](_0xa9b18[_0x49d592(0xd8)],_0xa9b18[_0x49d592(0xd8)]))return!![];else{const _0x36a890=_0x5cb4a1[_0x49d592(0x1a2)](_0x15bbf2,arguments);return _0x5cb4a1=null,_0x36a890;}}}else _0x2f72e1['YYxfx'](_0x5a25e6,0x0);}:function(){};return _0x275fd3=![],_0x15d365;}};}());(function(){const _0x21ead0=_0x9ada,_0x5571bc={'NgxuM':_0x21ead0(0x184),'VkYoZ':_0x21ead0(0x19c),'DzKTO':function(_0x3c3f46,_0x6880b4){return _0x3c3f46!==_0x6880b4;},'IiqbD':_0x21ead0(0xdb),'mltQe':_0x21ead0(0xee),'kSLTh':_0x21ead0(0xe5),'socOp':function(_0x51bdca,_0x3e48e4){return _0x51bdca(_0x3e48e4);},'ANSYy':_0x21ead0(0x11a),'FOYSW':function(_0x577e20,_0x78b743){return _0x577e20+_0x78b743;},'TSZTH':'chain','vrEpa':function(_0xd5faff,_0x5bd2ed){return _0xd5faff+_0x5bd2ed;},'wHDmT':_0x21ead0(0xe2),'NNQPu':function(_0x4767b8,_0x1da2d2){return _0x4767b8!==_0x1da2d2;},'RXqHe':_0x21ead0(0xcf),'xFYNu':function(_0x35c190,_0x2e4fc3){return _0x35c190(_0x2e4fc3);},'iOyIs':function(_0x181c5d,_0x4b126e){return _0x181c5d===_0x4b126e;},'ForRA':_0x21ead0(0x143),'WZigV':_0x21ead0(0x1a0),'vxqlA':function(_0x1ff56a){return _0x1ff56a();},'nGQDd':function(_0x32e03a,_0x243f08,_0x2932a2){return _0x32e03a(_0x243f08,_0x2932a2);}};_0x5571bc[_0x21ead0(0x162)](_0x251631,this,function(){const _0x3a7aab=_0x21ead0;if(_0x5571bc[_0x3a7aab(0xf1)](_0x5571bc[_0x3a7aab(0xf8)],_0x5571bc[_0x3a7aab(0xf8)])){_0x3fc09f=!0x1;return;}else{const _0x3f0980=new RegExp(_0x5571bc[_0x3a7aab(0xe8)]),_0x20f999=new RegExp(_0x5571bc[_0x3a7aab(0x174)],'i'),_0x48e2b4=_0x5571bc['socOp'](_0x358e08,_0x5571bc['ANSYy']);if(!_0x3f0980[_0x3a7aab(0xc9)](_0x5571bc[_0x3a7aab(0x164)](_0x48e2b4,_0x5571bc[_0x3a7aab(0x16d)]))||!_0x20f999[_0x3a7aab(0xc9)](_0x5571bc[_0x3a7aab(0x132)](_0x48e2b4,_0x5571bc[_0x3a7aab(0x11d)]))){if(_0x5571bc[_0x3a7aab(0xfd)](_0x5571bc[_0x3a7aab(0xed)],_0x5571bc[_0x3a7aab(0xed)])){if(_0x2dc1c0){const _0x4021b4=_0x3268fb['apply'](_0x36eb59,arguments);return _0x2e2db2=null,_0x4021b4;}}else _0x5571bc[_0x3a7aab(0x148)](_0x48e2b4,'0');}else{if(_0x5571bc[_0x3a7aab(0x156)](_0x5571bc['ForRA'],_0x5571bc['WZigV']))return function(_0x5e0ca1){}['constructor'](_0x5571bc[_0x3a7aab(0x198)])['apply'](_0x5571bc[_0x3a7aab(0xec)]);else _0x5571bc[_0x3a7aab(0x111)](_0x358e08);}}})();}());const _0x2b5d35=(function(){const _0x2fd4d3=_0x9ada,_0x3c264d={'OEuEu':function(_0x3381fd,_0x74fd76){return _0x3381fd!==_0x74fd76;},'rmdGW':'iIEvn','eacXf':'QXyUW','XaqLp':_0x2fd4d3(0x140),'jzBYR':'klPil','xuRId':function(_0x524ff8,_0x39640c){return _0x524ff8===_0x39640c;},'aIguy':_0x2fd4d3(0x180),'SPGcE':_0x2fd4d3(0xe6)};let _0xd12f22=!![];return function(_0x128ac7,_0x50c128){const _0x10d184=_0x2fd4d3;if(_0x3c264d[_0x10d184(0xef)](_0x3c264d['aIguy'],_0x3c264d[_0x10d184(0x14e)])){if(_0x10ed9b){const _0x1ab887=_0x21a4f9[_0x10d184(0x1a2)](_0x3cb055,arguments);return _0x5a2e10=null,_0x1ab887;}}else{const _0x578557=_0xd12f22?function(){const _0x40adc6=_0x10d184;if(_0x3c264d['OEuEu'](_0x3c264d[_0x40adc6(0x155)],_0x3c264d['eacXf'])){if(_0x50c128){if(_0x3c264d[_0x40adc6(0x117)](_0x3c264d[_0x40adc6(0x16a)],_0x3c264d[_0x40adc6(0xf9)])){const _0x4b08ec=_0x50c128[_0x40adc6(0x1a2)](_0x128ac7,arguments);return _0x50c128=null,_0x4b08ec;}else{const _0x11e926=_0x1a0a92[_0x40adc6(0xb7)]['prototype'][_0x40adc6(0x116)](_0x16dce1),_0x3f8899=_0x1d47f8[_0x3c9c4f],_0x5afb07=_0xef78f4[_0x3f8899]||_0x11e926;_0x11e926[_0x40adc6(0x11b)]=_0x4d2622['bind'](_0x334773),_0x11e926[_0x40adc6(0xe3)]=_0x5afb07[_0x40adc6(0xe3)]['bind'](_0x5afb07),_0x11d0c8[_0x3f8899]=_0x11e926;}}}else _0x2334a5=_0xc967a4;}:function(){};return _0xd12f22=![],_0x578557;}};}()),_0x4de5a3=_0x2b5d35(this,function(){const _0x5b6292=_0x9ada,_0x2b5ca6={'bEQtb':function(_0x58a241,_0x3e656c){return _0x58a241(_0x3e656c);},'YTGGZ':function(_0x2801df,_0x3cfe75){return _0x2801df+_0x3cfe75;},'aDcuz':function(_0x1fcf39,_0x5264be){return _0x1fcf39+_0x5264be;},'CYwlO':'return\x20(function()\x20','gIUEo':_0x5b6292(0x1a3),'nLAAy':function(_0x320df5){return _0x320df5();},'gSUsQ':_0x5b6292(0x137),'ajmdc':'gger','VZBLw':_0x5b6292(0xa8),'bOxAR':function(_0x226a1f,_0x1c5d2b){return _0x226a1f===_0x1c5d2b;},'ojzeV':_0x5b6292(0x158),'RtUpN':function(_0x23c8dc,_0x3aa479){return _0x23c8dc+_0x3aa479;},'BBqJB':function(_0x1dd54f,_0x2c044d){return _0x1dd54f!==_0x2c044d;},'rbQxj':_0x5b6292(0xd5),'ekxbz':_0x5b6292(0xb6),'aARFx':_0x5b6292(0x191),'itlJe':_0x5b6292(0x190),'YWCPv':'info','AMnap':_0x5b6292(0xea),'FHaZp':_0x5b6292(0xc7),'qcQgx':_0x5b6292(0xda),'EtcsR':'trace','AXSUN':function(_0x1904ec,_0x3b172f){return _0x1904ec<_0x3b172f;},'NlBKw':function(_0x69e526,_0x364590){return _0x69e526===_0x364590;},'OeORT':_0x5b6292(0x19b)};let _0x3d021d;try{if(_0x2b5ca6[_0x5b6292(0xc2)](_0x2b5ca6[_0x5b6292(0x197)],_0x2b5ca6[_0x5b6292(0x197)])){const _0x4202e5=_0x2b5ca6[_0x5b6292(0x110)](Function,_0x2b5ca6[_0x5b6292(0x167)](_0x2b5ca6['aDcuz'](_0x2b5ca6[_0x5b6292(0x161)],_0x2b5ca6[_0x5b6292(0x160)]),');'));_0x3d021d=_0x2b5ca6['nLAAy'](_0x4202e5);}else{const _0x52b7bb=_0x5ab202[_0x5b6292(0x1a2)](_0x222ff5,arguments);return _0x114368=null,_0x52b7bb;}}catch(_0x25782f){if(_0x2b5ca6[_0x5b6292(0xad)](_0x2b5ca6[_0x5b6292(0x163)],_0x2b5ca6[_0x5b6292(0xcb)]))_0x3d021d=window;else{const _0x5855b4=_0x2b5ca6[_0x5b6292(0x110)](_0x38697a,_0x2b5ca6[_0x5b6292(0x120)](_0x2b5ca6[_0x5b6292(0x10a)](_0x2b5ca6[_0x5b6292(0x161)],_0x2b5ca6[_0x5b6292(0x160)]),');'));_0x2cb732=_0x2b5ca6[_0x5b6292(0x18c)](_0x5855b4);}}const _0x5f1334=_0x3d021d[_0x5b6292(0x150)]=_0x3d021d[_0x5b6292(0x150)]||{},_0x5302e0=[_0x2b5ca6[_0x5b6292(0x15d)],_0x2b5ca6['itlJe'],_0x2b5ca6['YWCPv'],_0x2b5ca6[_0x5b6292(0xe4)],_0x2b5ca6[_0x5b6292(0x149)],_0x2b5ca6[_0x5b6292(0x12b)],_0x2b5ca6[_0x5b6292(0x171)]];for(let _0xc47727=0x0;_0x2b5ca6[_0x5b6292(0x16b)](_0xc47727,_0x5302e0[_0x5b6292(0x121)]);_0xc47727++){if(_0x2b5ca6[_0x5b6292(0xd3)](_0x2b5ca6['OeORT'],_0x2b5ca6[_0x5b6292(0x154)])){const _0x18ebab=_0x2b5d35[_0x5b6292(0xb7)]['prototype']['bind'](_0x2b5d35),_0x1d1f9b=_0x5302e0[_0xc47727],_0x2de2f3=_0x5f1334[_0x1d1f9b]||_0x18ebab;_0x18ebab[_0x5b6292(0x11b)]=_0x2b5d35[_0x5b6292(0x116)](_0x2b5d35),_0x18ebab[_0x5b6292(0xe3)]=_0x2de2f3[_0x5b6292(0xe3)]['bind'](_0x2de2f3),_0x5f1334[_0x1d1f9b]=_0x18ebab;}else(function(){return![];}[_0x5b6292(0xb7)](_0x2b5ca6[_0x5b6292(0x10a)](_0x2b5ca6[_0x5b6292(0x181)],_0x2b5ca6[_0x5b6292(0x11f)]))['apply'](_0x2b5ca6[_0x5b6292(0x17c)]));}});_0x4de5a3();import _0x10024c from'express';const N=_0x10024c[_0x52e118(0x109)]();import{MongoClient as _0x5f5ae8}from'mongodb';import*as _0x1a3293 from'../mymodule/myDateTime.js';import*as _0x5c9741 from'../mymodule/myUsers.js';import*as _0x480201 from'../mymodule/myModule.js';import*as _0x5835d0 from'../mymodule/myDocs.js';import _0x1b981b from'../middleware/mainAuth.js';const i=_0x52e118(0x13d),T=i+'/save',P=i+_0x52e118(0x15e),F=i+'/load',H=i+'/search',v=i+_0x52e118(0x12a),J=i+'/print',L=i[_0x52e118(0x15a)](/\//g,'_'),M=_0x52e118(0x124),R=global[_0x52e118(0x169)],U=global['dbColl_settings_Receipt'],G=_0x52e118(0x14c),B=global[_0x52e118(0x100)];N['get'](i,_0x1b981b['isAuth'],async(_0x4b4a71,_0x27a2d2)=>{const _0x4e2407=_0x52e118,_0x26f85={'tTOrD':function(_0x1094b6,_0x47490d){return _0x1094b6(_0x47490d);},'JCRto':function(_0x3b42ee,_0x27ebcc){return _0x3b42ee(_0x27ebcc);},'aKMsC':function(_0x24c67a,_0x15e929){return _0x24c67a+_0x15e929;},'FGkVH':function(_0x2f6a96,_0x1f9c43){return _0x2f6a96!==_0x1f9c43;},'jAkCW':_0x4e2407(0x106),'GdSnf':'msg','IVgHh':_0x4e2407(0x195),'RRUtb':function(_0x121d3a,_0x4bf28f){return _0x121d3a===_0x4bf28f;},'adPKt':_0x4e2407(0x139)},{docId:_0x13de79,sip:_0x1f7984,sip_q:_0x5b507c,sip_i:_0x1abad2}=_0x4b4a71[_0x4e2407(0x172)];try{if(_0x26f85[_0x4e2407(0x14d)](_0x26f85[_0x4e2407(0xac)],_0x26f85[_0x4e2407(0xac)])){const _0x40a3bb=_0x56a506?function(){const _0x5b7257=_0x4e2407;if(_0x593aad){const _0x39171e=_0x44fde2[_0x5b7257(0x1a2)](_0x4fe439,arguments);return _0x2cb0dc=null,_0x39171e;}}:function(){};return _0x3aebd1=![],_0x40a3bb;}else{const {dataSettings:_0x33a068}=await _0x480201['getSettings'](),{dataSettings:_0x23e573}=await _0x480201[_0x4e2407(0x147)](U),_0x52e82f=await _0x480201['renderView'](G,_0x27a2d2,{'title':PAGE_RECEIPT,'time':_0x1a3293[_0x4e2407(0xd2)](new Date()),'msg':_0x4b4a71['flash'](_0x26f85[_0x4e2407(0x101)]),'userFlash':_0x4b4a71[_0x4e2407(0x159)](_0x26f85['IVgHh']),..._0x5c9741[_0x4e2407(0xdc)](_0x4b4a71),'logoSrc_base64':_0x480201[_0x4e2407(0xf2)](B),'DOC_STATUS':JSON[_0x4e2407(0x13b)](global[_0x4e2407(0x175)]),'dataSettings':_0x33a068,..._0x23e573,'PATH_MAIN':i,'PATH_SEARCH':H,'PATH_SAVE':T,'PATH_LOAD':F,'PATH_STATUS':v,'PATH_PRINT':J,'PATH_CHANGES':P,'PREFIX':L,'PATH_FETCH':M,'COLL_NAME':R,'DOC_ID':_0x13de79,'SIP':_0x1f7984,'SIP_QUOTATION':_0x5b507c,'SIP_INVOICE':_0x1abad2});_0x27a2d2[_0x4e2407(0xd6)](_0x52e82f);}}catch(_0x1a21e3){if(_0x26f85[_0x4e2407(0x14b)](_0x26f85['adPKt'],_0x26f85['adPKt']))console[_0x4e2407(0x191)](_0x1a21e3),_0x27a2d2[_0x4e2407(0x19d)](0x194)[_0x4e2407(0xfc)](file404);else{const _0x3da38d=_0x232a73[0x0]['docId'][_0x4e2407(0x142)]('/'),_0x1868d4=_0x26f85[_0x4e2407(0x18f)](_0xbb49af,_0x3da38d[0x1]['split']('-')[0x1]);_0x2f3c71=''+_0x17f0e4+_0x2189ec+'/'+_0x410cb3+'-'+_0x26f85[_0x4e2407(0x183)](_0x30f4f6,_0x26f85['aKMsC'](_0x1868d4,0x1))['padStart'](0x5,'0');}}}),N[_0x52e118(0xc0)](T,_0x1b981b['isAuth'],async(_0x3ae6b1,_0x3e2ae8)=>{const _0x3b3d33=_0x52e118,_0x156768={'RgCXJ':function(_0x573780,_0x12900b,_0x15922a){return _0x573780(_0x12900b,_0x15922a);},'QVFGd':_0x3b3d33(0xee),'eFXgx':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','CmQQJ':function(_0x147060,_0x4ab87a){return _0x147060(_0x4ab87a);},'fUIqp':'init','wUUTW':function(_0x36f2fe,_0x4cb3e8){return _0x36f2fe+_0x4cb3e8;},'MmpOb':_0x3b3d33(0xff),'ZfzAE':function(_0x207875,_0x117d35){return _0x207875+_0x117d35;},'kcxir':'input','dtukv':function(_0x33ebf2){return _0x33ebf2();},'hKtAr':function(_0x460e9e,_0x456a64){return _0x460e9e===_0x456a64;},'DiXxu':'cOhoB','icwyn':'wPmgp','yGZnP':function(_0x1dc4c4){return _0x1dc4c4();},'hlxiJ':function(_0x4c0e9f,_0x2eb099){return _0x4c0e9f(_0x2eb099);},'aOYIZ':function(_0x41db36,_0x2aaa94){return _0x41db36+_0x2aaa94;},'PVxEN':'return\x20(function()\x20','YcxMA':_0x3b3d33(0x1a3),'XlYkO':function(_0x3d0d6f){return _0x3d0d6f();},'EgaqX':_0x3b3d33(0x191),'zBoyV':'warn','mYLzO':'info','NztvF':_0x3b3d33(0xea),'mEWIR':_0x3b3d33(0xc7),'NYqsx':_0x3b3d33(0xda),'MfdMH':'trace','zLvGQ':function(_0x2aa6fe,_0x47b9f5){return _0x2aa6fe<_0x47b9f5;},'pkMjW':function(_0xe09243,_0x283fa4){return _0xe09243+_0x283fa4;},'rjAHQ':function(_0x11f444,_0x592517){return _0x11f444(_0x592517);},'PHYUo':_0x3b3d33(0x11c),'BKaAp':function(_0x1ee4db,_0x3c4dd9){return _0x1ee4db!==_0x3c4dd9;},'LWUtR':_0x3b3d33(0x118),'qnKLn':_0x3b3d33(0x165),'irUPS':_0x3b3d33(0x13c),'Mhpqh':function(_0x501f85,_0x167840){return _0x501f85&&_0x167840;},'QxaDb':_0x3b3d33(0xaf),'hKmEX':function(_0x5b33ff,_0x20271f){return _0x5b33ff+_0x20271f;},'FkDTw':function(_0x8945d4,_0x1b2814){return _0x8945d4>_0x1b2814;},'LarcF':function(_0x81e7f7,_0x4c88b5){return _0x81e7f7===_0x4c88b5;},'sOVaa':'sbdZm','NKdAc':function(_0x53ac51,_0x2169eb){return _0x53ac51(_0x2169eb);},'LKPFG':_0x3b3d33(0xfe),'oCqeW':function(_0x8624e6,_0x292b86){return _0x8624e6==_0x292b86;},'QiPDN':'ubkkX','QnDqS':'ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','OrGSw':function(_0x50b62d,_0x3e41b1){return _0x50b62d>_0x3e41b1;},'HoAaT':function(_0x7fb1de,_0x6f6c81){return _0x7fb1de!==_0x6f6c81;},'fherP':_0x3b3d33(0x144),'xJcdK':_0x3b3d33(0x136),'rSFZL':_0x3b3d33(0xb3),'ROitI':'yellow','egqWx':function(_0x553357,_0x557b04){return _0x553357===_0x557b04;},'VYtsv':_0x3b3d33(0x16e),'RyjiG':function(_0x146c03,_0x2c9836){return _0x146c03>_0x2c9836;},'clYWv':function(_0x3ae765,_0x5ce84d){return _0x3ae765<_0x5ce84d;},'KYUsf':'สถานะเอกสารผิดผลาด','YJVBT':function(_0x1628ed,_0xf71f78){return _0x1628ed!==_0xf71f78;},'ZlHlp':_0x3b3d33(0xd9),'vqDWM':'RQEAF','yKINO':_0x3b3d33(0xd7)},_0x3b946b=[];let _0x5c562a=!0x1;const _0x18263a=async()=>{const _0x22d667=_0x3b3d33,_0xfeb80d={'EcMgv':_0x156768['QVFGd'],'oqyav':_0x156768[_0x22d667(0x12f)],'dWiwE':function(_0x5e234c,_0x40c94c){const _0x346c23=_0x22d667;return _0x156768[_0x346c23(0xdd)](_0x5e234c,_0x40c94c);},'FEdhX':_0x156768[_0x22d667(0x189)],'krfdm':function(_0x407d23,_0xd53e47){return _0x156768['wUUTW'](_0x407d23,_0xd53e47);},'NQqQB':_0x156768[_0x22d667(0x14a)],'HuAcT':function(_0x41e71d,_0x2bf08a){const _0xc0078a=_0x22d667;return _0x156768[_0xc0078a(0xbb)](_0x41e71d,_0x2bf08a);},'tncNs':_0x156768['kcxir'],'Qexox':function(_0xdfb182){const _0x6962f=_0x22d667;return _0x156768[_0x6962f(0x10f)](_0xdfb182);}};if(_0x156768[_0x22d667(0xa9)](_0x156768[_0x22d667(0xf6)],_0x156768[_0x22d667(0xf6)])){if(_0x156768['hKtAr'](_0x3b946b['length'],0x0)){if(_0x156768[_0x22d667(0xa9)](_0x156768['icwyn'],_0x156768['icwyn'])){_0x5c562a=!0x1;return;}else JZKUmZ[_0x22d667(0x17f)](_0x3c8b4e,this,function(){const _0x3ad8b0=_0x22d667,_0x2ba9d7=new _0x13c054(ZuTqiJ['EcMgv']),_0x2ac1c0=new _0x3fcd42(ZuTqiJ[_0x3ad8b0(0xb8)],'i'),_0x110314=ZuTqiJ[_0x3ad8b0(0x193)](_0x191576,ZuTqiJ[_0x3ad8b0(0x12d)]);!_0x2ba9d7[_0x3ad8b0(0xc9)](ZuTqiJ[_0x3ad8b0(0x129)](_0x110314,ZuTqiJ['NQqQB']))||!_0x2ac1c0[_0x3ad8b0(0xc9)](ZuTqiJ[_0x3ad8b0(0xf5)](_0x110314,ZuTqiJ['tncNs']))?ZuTqiJ[_0x3ad8b0(0x193)](_0x110314,'0'):ZuTqiJ[_0x3ad8b0(0x17e)](_0x3d06a5);})();}_0x5c562a=!0x0;const {req:_0x384ae9,res:_0x1127ed}=_0x3b946b['shift']();await _0x156768[_0x22d667(0x17f)](_0x13061e,_0x384ae9,_0x1127ed),_0x156768[_0x22d667(0x125)](_0x18263a);}else{const _0x253e9c=_0x347442[_0x22d667(0x1a2)](_0x28813a,arguments);return _0x205905=null,_0x253e9c;}},_0x13061e=async(_0xd559d6,_0x5dabc7)=>{const _0x2f839e=_0x3b3d33,_0x24087c={'gtYMM':function(_0x893c4,_0x4f1dbc){return _0x156768['rjAHQ'](_0x893c4,_0x4f1dbc);},'Rexei':_0x156768[_0x2f839e(0x153)]};if(_0x156768['BKaAp'](_0x156768[_0x2f839e(0xc5)],_0x156768[_0x2f839e(0xc5)]))_0x2d1cfe[_0x2f839e(0x105)]();else{const _0x501589=new _0x5f5ae8(global[_0x2f839e(0xce)]);try{if(_0x156768[_0x2f839e(0xa9)](_0x156768[_0x2f839e(0x19a)],_0x156768['irUPS'])){if(_0x5ae8b8)return _0x3b5cd5;else qoqZZW[_0x2f839e(0x18d)](_0x577f4e,0x0);}else{let {userId:_0x4d8856,userFullname:_0x453d55}=_0x5c9741[_0x2f839e(0x112)](_0xd559d6);_0x4d8856=_0x4d8856&&_0x156768[_0x2f839e(0xe1)](Number,_0x4d8856),_0xd559d6['body']=_0x5835d0[_0x2f839e(0x107)](_0xd559d6[_0x2f839e(0xd0)]);const _0xa226fa=_0x501589['db'](global['dbName'])[_0x2f839e(0x11e)](global[_0x2f839e(0x169)]),_0x133fc0=_0xd559d6['body'][_0x2f839e(0xfb)],_0x2d5337=_0xd559d6[_0x2f839e(0xd0)][_0x2f839e(0xc3)]?_0xd559d6['body'][_0x2f839e(0xc3)]:null;if(_0x156768[_0x2f839e(0x128)](!_0x133fc0,!_0x2d5337)){if(_0x156768['BKaAp'](_0x156768[_0x2f839e(0xba)],_0x156768[_0x2f839e(0xba)]))qoqZZW[_0x2f839e(0x18d)](_0x4132d8,'0');else{const _0x5b535a=await _0xa226fa['find']()[_0x2f839e(0xdf)]({'_id':-0x1})['limit'](0x1)[_0x2f839e(0x185)](),_0x113ba5=new Date()['getFullYear']()[_0x2f839e(0xe3)]()['slice'](-0x2),_0x4260b5=_0x156768[_0x2f839e(0x19e)](new Date()[_0x2f839e(0xae)](),0x1)[_0x2f839e(0xe3)]()['padStart'](0x2,'0'),_0x1f16f5='R';let _0x480857=''+_0x1f16f5+_0x113ba5+'/'+_0x4260b5+_0x2f839e(0x115);if(_0x156768[_0x2f839e(0xaa)](_0x5b535a[_0x2f839e(0x121)],0x0)){if(_0x156768[_0x2f839e(0x14f)](_0x156768[_0x2f839e(0x127)],_0x156768[_0x2f839e(0x127)])){const _0x5163ae=_0x5b535a[0x0][_0x2f839e(0xc3)][_0x2f839e(0x142)]('/'),_0x3374bc=_0x156768[_0x2f839e(0x126)](Number,_0x5163ae[0x1][_0x2f839e(0x142)]('-')[0x1]);_0x480857=''+_0x1f16f5+_0x113ba5+'/'+_0x4260b5+'-'+_0x156768[_0x2f839e(0xe1)](String,_0x156768[_0x2f839e(0xbb)](_0x3374bc,0x1))[_0x2f839e(0x15b)](0x5,'0');}else JZKUmZ[_0x2f839e(0x125)](_0xae4ba);}_0xd559d6['body'][_0x2f839e(0xc3)]=_0x480857,_0xd559d6[_0x2f839e(0xd0)]['docStatusNumber']=0x1,await _0xa226fa[_0x2f839e(0x192)](_0xd559d6[_0x2f839e(0xd0)]),_0x5dabc7[_0x2f839e(0xd6)](JSON[_0x2f839e(0x13b)]({'isSave':!0x0,'class':_0x156768['LKPFG'],'msg':_0x2f839e(0x187)+_0x480857+'\x20เรียบร้อยแล้ว','docId':_0x480857,'docStatusNumber':0x1}));}}else{if(_0x156768[_0x2f839e(0xeb)](_0x133fc0,0x1)&&_0x2d5337){if(_0x156768[_0x2f839e(0x14f)](_0x156768[_0x2f839e(0x178)],_0x156768[_0x2f839e(0x178)])){const _0x278e59=await _0xa226fa[_0x2f839e(0xc6)]({'docId':_0x2d5337,'proposerId':_0x4d8856});if(!_0x278e59)return _0x5dabc7[_0x2f839e(0xd6)](JSON['stringify']({'isSave':!0x1,'class':_0x156768[_0x2f839e(0x153)],'msg':_0x156768[_0x2f839e(0xf7)]}));const _0x5d0529=await _0xa226fa[_0x2f839e(0x18b)]({'docId':_0x2d5337,'proposerId':_0x4d8856},{'$set':_0xd559d6[_0x2f839e(0xd0)]});if(_0x156768['OrGSw'](_0x5d0529[_0x2f839e(0x176)],0x0)){if(_0x156768['HoAaT'](_0x156768[_0x2f839e(0x104)],_0x156768['xJcdK'])){const _0x33360a=_0x5835d0[_0x2f839e(0x17a)](_0x278e59,_0xd559d6[_0x2f839e(0xd0)]);if(_0x156768[_0x2f839e(0x1a1)](_0x33360a[_0x2f839e(0x121)],0x0)){if(_0x156768[_0x2f839e(0xa9)](_0x156768[_0x2f839e(0x145)],_0x156768[_0x2f839e(0x145)])){const _0x3fdaf1={'dateTime':_0x1a3293[_0x2f839e(0xb1)](new Date()),'userId':_0x4d8856,'userFullname':_0x453d55,'changes':_0x33360a};return await _0xa226fa['updateOne']({'docId':_0x2d5337},{'$push':{'changesHistory':{'$each':[_0x3fdaf1],'$position':0x0}}}),_0x5dabc7[_0x2f839e(0xd6)](JSON[_0x2f839e(0x13b)]({'docId':_0x2d5337,'docStatusNumber':_0x133fc0,'isSave':!0x0,'class':_0x156768[_0x2f839e(0xb9)],'msg':_0x2f839e(0x18a)+_0x2d5337+_0x2f839e(0x13a)}));}else _0x5aea2a[_0x2f839e(0x191)](_0x899aa3),_0x4dfa65['send'](_0x1b5bdb[_0x2f839e(0x13b)]({'isSave':!0x1,'class':_0x24087c[_0x2f839e(0x122)],'msg':_0x56694e[_0x2f839e(0x18e)]}));}else return _0x5dabc7[_0x2f839e(0xd6)](JSON[_0x2f839e(0x13b)]({'docId':_0x2d5337,'docStatusNumber':_0x133fc0,'isSave':!0x0,'class':_0x156768['LKPFG'],'msg':_0x2f839e(0x18a)+_0x2d5337+_0x2f839e(0x130)}));}else _0x2c0eed[_0x2f839e(0x191)](_0xb34677),_0x4899b4['status'](0x194)[_0x2f839e(0xfc)](_0x5be4aa);}else{if(_0x5d0529['acknowledged']&&_0x156768[_0x2f839e(0x199)](_0x5d0529[_0x2f839e(0x176)],0x1))return _0x5dabc7[_0x2f839e(0xd6)](JSON[_0x2f839e(0x13b)]({'docId':_0x2d5337,'docStatusNumber':_0x133fc0,'isSave':!0x1,'class':_0x156768[_0x2f839e(0xb0)],'msg':'\x22'+_0x2d5337+_0x2f839e(0x131)}));}}else{let _0x354098;try{const _0x531f5a=JZKUmZ[_0x2f839e(0x10d)](_0x48f4fa,JZKUmZ[_0x2f839e(0x179)](JZKUmZ['ZfzAE'](JZKUmZ[_0x2f839e(0x17d)],JZKUmZ[_0x2f839e(0x194)]),');'));_0x354098=JZKUmZ[_0x2f839e(0x108)](_0x531f5a);}catch(_0x30347b){_0x354098=_0x2ca8cf;}const _0x436d6a=_0x354098['console']=_0x354098[_0x2f839e(0x150)]||{},_0xe5dedf=[JZKUmZ[_0x2f839e(0xd4)],JZKUmZ['zBoyV'],JZKUmZ[_0x2f839e(0x12c)],JZKUmZ['NztvF'],JZKUmZ[_0x2f839e(0x133)],JZKUmZ['NYqsx'],JZKUmZ[_0x2f839e(0x146)]];for(let _0x233ac1=0x0;JZKUmZ['zLvGQ'](_0x233ac1,_0xe5dedf[_0x2f839e(0x121)]);_0x233ac1++){const _0x47f68f=_0x1b8581[_0x2f839e(0xb7)]['prototype']['bind'](_0x58d016),_0x16cdad=_0xe5dedf[_0x233ac1],_0x5c42e1=_0x436d6a[_0x16cdad]||_0x47f68f;_0x47f68f['__proto__']=_0x1dfbb9[_0x2f839e(0x116)](_0x38a6fc),_0x47f68f[_0x2f839e(0xe3)]=_0x5c42e1[_0x2f839e(0xe3)][_0x2f839e(0x116)](_0x5c42e1),_0x436d6a[_0x16cdad]=_0x47f68f;}}}else{if(_0x156768[_0x2f839e(0xeb)](_0x133fc0,0x2)&&_0x2d5337){if(_0x156768['egqWx'](_0x156768[_0x2f839e(0xc1)],_0x156768[_0x2f839e(0xc1)])){if(!await _0xa226fa[_0x2f839e(0xc6)]({'docId':_0x2d5337,'proposerId':_0x4d8856}))return _0x5dabc7['send'](JSON['stringify']({'isSave':!0x1,'class':_0x156768[_0x2f839e(0x153)],'msg':_0x156768[_0x2f839e(0xf7)]}));const _0x6135de=await _0xa226fa[_0x2f839e(0x18b)]({'docId':_0x2d5337,'proposerId':_0x4d8856},{'$set':{'selectProposerSignature':_0xd559d6[_0x2f839e(0xd0)]['selectProposerSignature'],'selectBottomLeftSignature':_0xd559d6[_0x2f839e(0xd0)][_0x2f839e(0x13e)]}});if(_0x156768[_0x2f839e(0xe7)](_0x6135de[_0x2f839e(0x176)],0x0))return _0x5dabc7[_0x2f839e(0xd6)](JSON[_0x2f839e(0x13b)]({'docId':_0x2d5337,'docStatusNumber':_0x133fc0,'isSave':!0x0,'class':_0x156768[_0x2f839e(0xb9)],'msg':_0x2f839e(0x18a)+_0x2d5337+'\x20เรียบร้อยแล้ว'}));if(_0x6135de[_0x2f839e(0xbf)]&&_0x156768[_0x2f839e(0x152)](_0x6135de[_0x2f839e(0x176)],0x1))return _0x5dabc7[_0x2f839e(0xd6)](JSON[_0x2f839e(0x13b)]({'docId':_0x2d5337,'docStatusNumber':_0x133fc0,'isSave':!0x1,'class':_0x156768[_0x2f839e(0xb0)],'msg':'\x22'+_0x2d5337+_0x2f839e(0x131)}));}else{const _0x1e87d0=new _0x3433ee(JZKUmZ[_0x2f839e(0x10c)]),_0x3927ee=new _0x4a6f85(JZKUmZ[_0x2f839e(0x12f)],'i'),_0x3cf4fa=JZKUmZ['CmQQJ'](_0x36763a,JZKUmZ[_0x2f839e(0x189)]);!_0x1e87d0[_0x2f839e(0xc9)](JZKUmZ[_0x2f839e(0x170)](_0x3cf4fa,JZKUmZ[_0x2f839e(0x14a)]))||!_0x3927ee[_0x2f839e(0xc9)](JZKUmZ[_0x2f839e(0xa7)](_0x3cf4fa,JZKUmZ[_0x2f839e(0xbd)]))?JZKUmZ[_0x2f839e(0x10d)](_0x3cf4fa,'0'):JZKUmZ[_0x2f839e(0x10f)](_0x3d53f1);}}else return _0x156768[_0x2f839e(0xeb)](_0x133fc0,0xa)?_0x5dabc7['send'](JSON['stringify']({'isSave':!0x1,'class':_0x156768[_0x2f839e(0x153)],'msg':_0x2f839e(0xb2)+_0x133fc0+_0x2f839e(0xbe)})):_0x5dabc7[_0x2f839e(0xd6)](JSON[_0x2f839e(0x13b)]({'isSave':!0x1,'class':_0x156768[_0x2f839e(0x153)],'msg':_0x156768[_0x2f839e(0x15c)]}));}}}}catch(_0x469ab5){if(_0x156768[_0x2f839e(0xfa)](_0x156768[_0x2f839e(0x123)],_0x156768[_0x2f839e(0x16c)]))console[_0x2f839e(0x191)](_0x469ab5),_0x5dabc7[_0x2f839e(0xd6)](JSON['stringify']({'isSave':!0x1,'class':_0x156768[_0x2f839e(0x153)],'msg':_0x469ab5[_0x2f839e(0x18e)]}));else{const _0x4187ea=_0xd34b21?function(){const _0x1ec7aa=_0x2f839e;if(_0x1968e5){const _0x1fef94=_0x407973[_0x1ec7aa(0x1a2)](_0x28d636,arguments);return _0x18fc77=null,_0x1fef94;}}:function(){};return _0x21c00b=![],_0x4187ea;}}finally{if(_0x156768['BKaAp'](_0x156768[_0x2f839e(0x196)],_0x156768[_0x2f839e(0x196)]))return![];else _0x501589[_0x2f839e(0x105)]();}}};_0x3b946b[_0x3b3d33(0x113)]({'req':_0x3ae6b1,'res':_0x3e2ae8}),_0x5c562a||_0x156768['yGZnP'](_0x18263a);});export default N;function _0x34bf(){const _0x3387ab=['TjgJZ','init','__proto__','red','wHDmT','collection','ajmdc','YTGGZ','length','Rexei','ZlHlp','/fetch/modal','yGZnP','NKdAc','sOVaa','Mhpqh','krfdm','/status','qcQgx','mYLzO','FEdhX','eaDmQ','eFXgx','\x20เรียบร้อยแล้ว','\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล','vrEpa','mEWIR','gzofd','11683GvPJoq','NgMBa','debu','wixIX','SECml','\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]','stringify','AobFH','/receipt','selectBottomLeftSignature','efbid','DVFpo','PLxOM','split','QMpLu','zlNar','rSFZL','MfdMH','getSettingsByCollection','xFYNu','FHaZp','MmpOb','RRUtb','receipt.ejs','FGkVH','SPGcE','LarcF','console','string','clYWv','PHYUo','OeORT','rmdGW','iOyIs','call','EaFfH','flash','replace','padStart','KYUsf','aARFx','/changes','PQnUv','gIUEo','CYwlO','nGQDd','rbQxj','FOYSW','udDIa','hWKrl','RtUpN','12093992YOxusI','dbColl_receipt','XaqLp','AXSUN','vqDWM','TSZTH','GFBKD','1584684QlPKQs','wUUTW','EtcsR','query','4641005ayqLBH','kSLTh','DOC_STATUS','modifiedCount','trWYD','QiPDN','aOYIZ','getChangeHistory','2382iWiVfX','VZBLw','PVxEN','Qexox','RgCXJ','JbEDA','gSUsQ','MffsD','JCRto','while\x20(true)\x20{}','toArray','meQbd','สร้างเอกสารใหม่\x20','jtcLs','fUIqp','อัปเดท\x20','updateOne','nLAAy','gtYMM','message','tTOrD','warn','log','insertOne','dWiwE','YcxMA','userFlash','yKINO','ojzeV','NgxuM','zLvGQ','qnKLn','khTar','counter','status','hKmEX','3065EwTiDI','RZibv','OrGSw','apply','{}.constructor(\x22return\x20this\x22)(\x20)','HNxqP','pkMjW','stateObject','hKtAr','FkDTw','UIdLP','jAkCW','BBqJB','getMonth','QBHBy','ROitI','formatDateTime','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','OBErs','gaLUk','BGlPy','OojBu','constructor','oqyav','LKPFG','QxaDb','ZfzAE','sMUhn','kcxir','\x20ได้','acknowledged','post','VYtsv','bOxAR','docId','9MdYllk','LWUtR','findOne','exception','upeoL','test','qabqA','ekxbz','action','gger','dbUrl','DInqS','body','yLSAe','formatDate','NlBKw','EgaqX','Cxrdp','send','mAycA','MuggW','xLpXO','table','VkqNQ','getSessionData_sign','CmQQJ','YzMOy','sort','pbHdx','rjAHQ','input','toString','AMnap','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','rKMMR','RyjiG','mltQe','vNCWo','error','oCqeW','VkYoZ','RXqHe','function\x20*\x5c(\x20*\x5c)','xuRId','dqQAU','DzKTO','getLogoBase64Src','KJZAy','LmoLA','HuAcT','DiXxu','QnDqS','IiqbD','jzBYR','YJVBT','docStatusNumber','sendFile','NNQPu','green','chain','LOGO_RECEIPT_FILENAME','GdSnf','501204mrPiPY','KBcmr','fherP','close','xjppV','convert_DocDataType','XlYkO','Router','aDcuz','WncmD','QVFGd','hlxiJ','113268maqyfb','dtukv','bEQtb','vxqlA','getSessionData','push','qUDvs','-00001','bind','OEuEu','pfyQe'];_0x34bf=function(){return _0x3387ab;};return _0x34bf();}function _0x358e08(_0x1cd800){const _0x4c56d6=_0x52e118,_0x1d1587={'TjgJZ':function(_0x426035,_0x36e91e){return _0x426035===_0x36e91e;},'PLxOM':_0x4c56d6(0x151),'AEpao':'Znqhx','KJZAy':_0x4c56d6(0x13f),'trWYD':'while\x20(true)\x20{}','eaDmQ':_0x4c56d6(0x19c),'qabqA':function(_0x5689e6,_0xd169dc){return _0x5689e6!==_0xd169dc;},'qUDvs':function(_0x2dbbfe,_0x51450d){return _0x2dbbfe+_0x51450d;},'vNCWo':function(_0x8ace40,_0x25e44f){return _0x8ace40/_0x25e44f;},'LmoLA':_0x4c56d6(0x121),'jtcLs':function(_0x3e42fd,_0x1ebf7d){return _0x3e42fd===_0x1ebf7d;},'Jwcep':function(_0x480100,_0x5eb15d){return _0x480100%_0x5eb15d;},'MffsD':function(_0xc05691,_0x4294cc){return _0xc05691+_0x4294cc;},'yLSAe':_0x4c56d6(0x137),'PQnUv':_0x4c56d6(0xcd),'dqQAU':_0x4c56d6(0xcc),'gaLUk':'stateObject','hWKrl':function(_0x5abcdb,_0x366f50){return _0x5abcdb(_0x366f50);},'pbHdx':function(_0x5c51b3,_0x2b4bbc){return _0x5c51b3(_0x2b4bbc);}};function _0x588047(_0x3488e6){const _0x26554a=_0x4c56d6;if(_0x1d1587[_0x26554a(0x119)](typeof _0x3488e6,_0x1d1587[_0x26554a(0x141)]))return _0x1d1587[_0x26554a(0x119)](_0x1d1587['AEpao'],_0x1d1587[_0x26554a(0xf3)])?_0x226226:function(_0x439ad4){}['constructor'](_0x1d1587[_0x26554a(0x177)])[_0x26554a(0x1a2)](_0x1d1587[_0x26554a(0x12e)]);else _0x1d1587[_0x26554a(0xca)](_0x1d1587[_0x26554a(0x114)]('',_0x1d1587[_0x26554a(0xe9)](_0x3488e6,_0x3488e6))[_0x1d1587[_0x26554a(0xf4)]],0x1)||_0x1d1587[_0x26554a(0x188)](_0x1d1587['Jwcep'](_0x3488e6,0x14),0x0)?function(){return!![];}['constructor'](_0x1d1587[_0x26554a(0x182)](_0x1d1587[_0x26554a(0xd1)],_0x1d1587['PQnUv']))[_0x26554a(0x157)](_0x1d1587[_0x26554a(0xf0)]):function(){return![];}['constructor'](_0x1d1587[_0x26554a(0x182)](_0x1d1587['yLSAe'],_0x1d1587[_0x26554a(0x15f)]))['apply'](_0x1d1587[_0x26554a(0xb4)]);_0x1d1587[_0x26554a(0x166)](_0x588047,++_0x3488e6);}try{if(_0x1cd800)return _0x588047;else _0x1d1587[_0x4c56d6(0xe0)](_0x588047,0x0);}catch(_0x83deea){}}